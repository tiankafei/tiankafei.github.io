(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{401:function(s,a,t){"use strict";t.r(a);var e=t(45),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"easy-mock安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#easy-mock安装配置"}},[s._v("#")]),s._v(" easy-mock安装配置")]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/easy-mock/easy-mock.git\n")])])]),t("h2",{attrs:{id:"进入其目录-安装依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入其目录-安装依赖"}},[s._v("#")]),s._v(" 进入其目录，安装依赖")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" easy-mock "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("报错")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('gyp WARN EACCES user "root" does not have permission to access the dev dir "/home/countly/nodejs/lib/node_modules/time/.node-gyp/0.10.36"\ngyp WARN EACCES attempting to reinstall using temporary dev dir "/home/countly/nodejs/lib/node_modules/time/.node-gyp"\n')])])]),t("p",[s._v("报错解决：在命令行后面增加")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --unsafe-perm \n")])])])]),s._v(" "),t("h2",{attrs:{id:"更改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更改配置"}},[s._v("#")]),s._v(" 更改配置")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("config/default.json\n")])])]),t("h2",{attrs:{id:"代码执行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码执行"}},[s._v("#")]),s._v(" 代码执行")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])])]),t("h2",{attrs:{id:"前端静态资源构建打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前端静态资源构建打包"}},[s._v("#")]),s._v(" 前端静态资源构建打包")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n")])])]),t("h2",{attrs:{id:"以生产环境方式启动-需要提前执行-build"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#以生产环境方式启动-需要提前执行-build"}},[s._v("#")]),s._v(" 以生产环境方式启动，需要提前执行 build")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run start\n")])])]),t("h2",{attrs:{id:"服务器部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器部署"}},[s._v("#")]),s._v(" 服务器部署")]),s._v(" "),t("h3",{attrs:{id:"全局安装-pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局安装-pm2"}},[s._v("#")]),s._v(" 全局安装 PM2")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pm2 -g\n")])])]),t("h3",{attrs:{id:"用-pm2-启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用-pm2-启动"}},[s._v("#")]),s._v(" 用 PM2 启动")]),s._v(" "),t("blockquote",[t("p",[s._v("设置pm2的环境变量")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置软连接")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /opt/node-v8.9.0-linux-x64/bin/pm2 /usr/local/bin/\n")])])]),t("p",[s._v("启动项目")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_ENV")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production pm2 start app.js --name easy-mock\n")])])]),t("p",[t("strong",[s._v("开机自启动")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pm2 startup  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建开机自启动命令")]),s._v("\npm2 save  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存当前应用列表")]),s._v("\npm2 resurrect  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新加载保存的应用列表")]),s._v("\npm2 unstartup  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除开机自启动")]),s._v("\n")])])]),t("p",[t("strong",[s._v("删除")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pm2 delete app_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("app_id  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从列表中删除指定的进程")]),s._v("\npm2 delete all "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从列表中删除全部进程")]),s._v("\npm2 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 杀死守护进程")]),s._v("\n")])])]),t("p",[t("strong",[s._v("停止")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pm2 stop app_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("app_id\npm2 stop all  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止所有")]),s._v("\n")])])]),t("p",[t("strong",[s._v("查看")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pm2 list "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程")]),s._v("\npm2 logs "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看日志")]),s._v("\npm2 show app_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("app_id "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程详情")]),s._v("\npm2 monit  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看CPU和内存资源占用")]),s._v("\n")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);