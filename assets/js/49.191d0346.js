(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{321:function(a,s,t){"use strict";t.r(s);var n=t(14),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"centos7安装mongodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装mongodb"}},[a._v("#")]),a._v(" CentOS7安装Mongodb")]),a._v(" "),s("h2",{attrs:{id:"下载并解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载并解压"}},[a._v("#")]),a._v(" 下载并解压")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.4.tgz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" mongodb-linux-x86_64-4.0.4.tgz\n")])])]),s("h2",{attrs:{id:"创建mongodb相关目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建mongodb相关目录"}},[a._v("#")]),a._v(" 创建mongodb相关目录")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" mongodb/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("data/db,log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" /root/mongodb-linux-x86_64-4.0.4 /opt/mongodb/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" /opt/mongodb/mongodb-linux-x86_64-4.0.4/* /opt/mongodb/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rf")]),a._v(" mongodb-linux-x86_64-4.0.4/\n\n")])])]),s("h2",{attrs:{id:"创建mongodb配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建mongodb配置文件"}},[a._v("#")]),a._v(" 创建mongodb配置文件")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/mongodb/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" conf\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" mgdb.conf\n")])])]),s("h2",{attrs:{id:"配置文件内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件内容"}},[a._v("#")]),a._v(" 配置文件内容")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbpath")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/mongodb/data/db  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#数据文件存放目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("logpath")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/mongodb/log/mongodb.log  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#日志文件存放目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("27017")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#端口，默认27017，可以自定义")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("logappend")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#开启日志追加添加日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("fork")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#以守护程序的方式启用，即在后台运行")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("bind_ip")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#本地监听IP，0.0.0.0表示本地所有IP")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("auth")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#是否需要验证权限登录(用户名和密码)")]),a._v("\n")])])]),s("h2",{attrs:{id:"添加环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加环境变量"}},[a._v("#")]),a._v(" 添加环境变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/profile\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MONGODB_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/mongodb\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$MONGODB_HOME")]),a._v("/bin\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),s("h2",{attrs:{id:"创建mongodb开机启动配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建mongodb开机启动配置文件"}},[a._v("#")]),a._v(" 创建Mongodb开机启动配置文件")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /lib/systemd/system/mongodb.service\n")])])]),s("h2",{attrs:{id:"启动文件内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动文件内容"}},[a._v("#")]),a._v(" 启动文件内容")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Unit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("Description")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mongodb\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("After")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("network.target remote-fs.target nss-lookup.target\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("Type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("forking\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RuntimeDirectory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mongodb\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PIDFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/mongodb/data/db/mongod.lock\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ExecStart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/mongodb/bin/mongod "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--config")]),a._v(" /opt/mongodb/conf/mgdb.conf\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ExecStop")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/mongodb/bin/mongod "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--shutdown")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--config")]),a._v(" /opt/mongodb/conf/mgdb.conf\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PrivateTmp")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Install"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  \n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("WantedBy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("multi-user.target\n")])])]),s("h2",{attrs:{id:"启动mongodb并加入开机启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动mongodb并加入开机启动"}},[a._v("#")]),a._v(" 启动mongodb并加入开机启动")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("systemctl daemon-reload\nsystemctl start mongodb\nsystemctl stop mongodb\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" mongodb\n")])])]),s("h2",{attrs:{id:"检验是否启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#检验是否启动"}},[a._v("#")]),a._v(" 检验是否启动")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ef")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" mongodb\n")])])]),s("h2",{attrs:{id:"创建mongodb管理用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建mongodb管理用户"}},[a._v("#")]),a._v(" 创建mongodb管理用户")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("mongo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("27017")]),a._v("\n\nuse admin\ndb.createUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("user:"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tiankafei"')]),a._v(",pwd:"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tiankafei"')]),a._v(",roles:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("role:"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"userAdminAnyDatabase"')]),a._v(",db: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\ndb.auth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'tiankafei'")]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'tiankafei'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("h2",{attrs:{id:"创建测试用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建测试用户"}},[a._v("#")]),a._v(" 创建测试用户")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("mongo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("27017")]),a._v("\n\nuse "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\ndb.createUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("user:"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test"')]),a._v(",pwd:"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tiankafei"')]),a._v(",roles:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("role:"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"readWrite"')]),a._v(",db:"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"securitydata"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\ndb.auth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'test'")]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'tiankafei'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("h2",{attrs:{id:"测试用户登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试用户登录"}},[a._v("#")]),a._v(" 测试用户登录")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("mongo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("27017")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tiankafei\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);