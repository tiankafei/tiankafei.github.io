(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{373:function(s,a,t){"use strict";t.r(a);var e=t(25),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"easy-mock安装配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#easy-mock安装配置"}},[s._v("#")]),s._v(" easy-mock安装配置")]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/easy-mock/easy-mock.git\n")])])]),a("h2",{attrs:{id:"进入其目录-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入其目录-安装依赖"}},[s._v("#")]),s._v(" 进入其目录，安装依赖")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" easy-mock "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("报错")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('gyp WARN EACCES user "root" does not have permission to access the dev dir "/home/countly/nodejs/lib/node_modules/time/.node-gyp/0.10.36"\ngyp WARN EACCES attempting to reinstall using temporary dev dir "/home/countly/nodejs/lib/node_modules/time/.node-gyp"\n')])])]),a("p",[s._v("报错解决：在命令行后面增加")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --unsafe-perm \n")])])])]),s._v(" "),a("h2",{attrs:{id:"更改配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更改配置"}},[s._v("#")]),s._v(" 更改配置")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("config/default.json\n")])])]),a("h2",{attrs:{id:"代码执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码执行"}},[s._v("#")]),s._v(" 代码执行")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])])]),a("h2",{attrs:{id:"前端静态资源构建打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端静态资源构建打包"}},[s._v("#")]),s._v(" 前端静态资源构建打包")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n")])])]),a("h2",{attrs:{id:"以生产环境方式启动-需要提前执行-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以生产环境方式启动-需要提前执行-build"}},[s._v("#")]),s._v(" 以生产环境方式启动，需要提前执行 build")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run start\n")])])]),a("h2",{attrs:{id:"服务器部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器部署"}},[s._v("#")]),s._v(" 服务器部署")]),s._v(" "),a("h3",{attrs:{id:"全局安装-pm2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局安装-pm2"}},[s._v("#")]),s._v(" 全局安装 PM2")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pm2 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v("\n")])])]),a("h3",{attrs:{id:"用-pm2-启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用-pm2-启动"}},[s._v("#")]),s._v(" 用 PM2 启动")]),s._v(" "),a("blockquote",[a("p",[s._v("设置pm2的环境变量")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置软连接")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /opt/node-v8.9.0-linux-x64/bin/pm2 /usr/local/bin/\n")])])]),a("p",[s._v("启动项目")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production pm2 start app.js "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" easy-mock\n")])])]),a("p",[a("strong",[s._v("开机自启动")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pm2 startup  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建开机自启动命令")]),s._v("\npm2 save  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存当前应用列表")]),s._v("\npm2 resurrect  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新加载保存的应用列表")]),s._v("\npm2 unstartup  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除开机自启动")]),s._v("\n")])])]),a("p",[a("strong",[s._v("删除")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pm2 delete app_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("app_id  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从列表中删除指定的进程")]),s._v("\npm2 delete all "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从列表中删除全部进程")]),s._v("\npm2 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 杀死守护进程")]),s._v("\n")])])]),a("p",[a("strong",[s._v("停止")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pm2 stop app_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("app_id\npm2 stop all  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止所有")]),s._v("\n")])])]),a("p",[a("strong",[s._v("查看")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pm2 list "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程")]),s._v("\npm2 logs "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看日志")]),s._v("\npm2 show app_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("app_id "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程详情")]),s._v("\npm2 monit  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看CPU和内存资源占用")]),s._v("\n")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);