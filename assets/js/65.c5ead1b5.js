(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{375:function(a,s,t){"use strict";t.r(s);var e=t(25),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"centos7安装kafka并设置开机启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装kafka并设置开机启动"}},[a._v("#")]),a._v(" centos7安装Kafka并设置开机启动")]),a._v(" "),s("blockquote",[s("p",[a._v("单节点kafka安装，Kafka2.x版本依然需要依赖Zookeeper")])]),a._v(" "),s("h2",{attrs:{id:"上传zookeeper、kafka、kafka-eagle程序包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传zookeeper、kafka、kafka-eagle程序包"}},[a._v("#")]),a._v(" 上传Zookeeper、Kafka、Kafka-eagle程序包")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("Zookeeper版本：3.8.0\nKafka版本：2.13-2.8.2\nKafka-eagle版本：3.0.1\n")])])]),s("h2",{attrs:{id:"安装zookeeper"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装zookeeper"}},[a._v("#")]),a._v(" 安装Zookeeper")]),a._v(" "),s("h3",{attrs:{id:"解压zookeeper"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压zookeeper"}},[a._v("#")]),a._v(" 解压Zookeeper")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/software/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" apache-zookeeper-3.8.0-bin.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" apache-zookeeper-3.8.0-bin zookeeper\n")])])]),s("h3",{attrs:{id:"复制zookeeper配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#复制zookeeper配置文件"}},[a._v("#")]),a._v(" 复制Zookeeper配置文件")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/software/zookeeper/conf\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" zoo_sample.cfg zoo.cfg\n")])])]),s("h3",{attrs:{id:"设置zookeeper环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置zookeeper环境变量"}},[a._v("#")]),a._v(" 设置Zookeeper环境变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/profile\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ZK_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/zookeeper\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ZK_HOME")]),a._v("/bin\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),s("h2",{attrs:{id:"安装kafka"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装kafka"}},[a._v("#")]),a._v(" 安装Kafka")]),a._v(" "),s("h3",{attrs:{id:"解压kafka"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压kafka"}},[a._v("#")]),a._v(" 解压Kafka")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/software/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" kafka_2.13-2.8.2.tgz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" kafka_2.13-2.8.2 kafka\n")])])]),s("h3",{attrs:{id:"更新kafka配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新kafka配置"}},[a._v("#")]),a._v(" 更新Kafka配置")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /opt/software/kafka/config/server.properties\n\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("listeners")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PLAINTEXT://192.168.216.43:9092\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("zookeeper.connect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".216.43:2181\n")])])]),s("h3",{attrs:{id:"添加启动参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加启动参数"}},[a._v("#")]),a._v(" 添加启动参数")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /opt/software/kafka/bin/kafka-server-start.sh\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#添加参数，为kafka-eagle 提供jxm数据支持，放置在脚本前面，如图。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"x'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$KAFKA_HEAP_OPTS")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"x"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KAFKA_HEAP_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-server -Xms2G -Xmx2G -XX:PermSize=128m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:ParallelGCThreads=8 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JMX_PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"9999"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])])]),s("h3",{attrs:{id:"设置kafka环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置kafka环境变量"}},[a._v("#")]),a._v(" 设置Kafka环境变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/profile\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KAFKA_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/kafka\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$KAFKA_HOME")]),a._v("/bin\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),s("h2",{attrs:{id:"安装kafka-eagle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装kafka-eagle"}},[a._v("#")]),a._v(" 安装Kafka-eagle")]),a._v(" "),s("h3",{attrs:{id:"解压kafka-eagle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压kafka-eagle"}},[a._v("#")]),a._v(" 解压Kafka-eagle")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/software/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" kafka-eagle-bin-3.0.1.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /opt/software/kafka-eagle/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" kafka-eagle-bin-3.0.1/efak-web-3.0.1-bin.tar.gz "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" /opt/software/kafka-eagle\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" kafka-eagle\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" efak-web-3.0.1/* ./\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rf")]),a._v(" efak-web-3.0.1\n")])])]),s("h3",{attrs:{id:"设置kafka-eagle环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置kafka-eagle环境变量"}},[a._v("#")]),a._v(" 设置Kafka-eagle环境变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/profile\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KE_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/kafka-eagle\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$KE_HOME")]),a._v("/bin\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),s("h3",{attrs:{id:"更新kafka-eagle配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新kafka-eagle配置"}},[a._v("#")]),a._v(" 更新Kafka-eagle配置")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /opt/software/kafka-eagle/conf/system-config.properties\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# multi zookeeper & kafka cluster list")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Settings prefixed with 'kafka.eagle.' will be deprecated, use 'efak.' instead")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("efak.zk.cluster.alias")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("cluster1\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cluster1.zk.list")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".216.43:2181\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#cluster2.zk.list=xdn10:2181,xdn11:2181,xdn12:2181")]),a._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# kafka mysql jdbc driver address")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################################")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("efak.driver")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("com.mysql.cj.jdbc.Driver\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("efak.url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("jdbc:mysql://192.168.216.22:3306/ke?useUnicode"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("characterEncoding")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("UTF-8"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("zeroDateTimeBehavior")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("convertToNull\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("efak.username")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("efak.password")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("tiankafei\n")])])]),s("h2",{attrs:{id:"制作启动脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#制作启动脚本"}},[a._v("#")]),a._v(" 制作启动脚本")]),a._v(" "),s("h3",{attrs:{id:"启动脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动脚本"}},[a._v("#")]),a._v(" 启动脚本")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /opt/software/kafka_start.sh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#!/bin/sh")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JAVA_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/java/default\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JRE_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/jre\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CLASSPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(".:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/lib:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JRE_HOME")]),a._v("/lib\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ZK_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/zookeeper\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KAFKA_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/kafka\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KE_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/kafka-eagle\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/bin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ZK_HOME")]),a._v("/bin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$KAFKA_HOME")]),a._v("/bin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$KE_HOME")]),a._v("/bin\n\n/opt/software/zookeeper/bin/zkServer.sh start\n/opt/software/kafka/bin/kafka-server-start.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-daemon")]),a._v(" /opt/software/kafka/config/server.properties\n/opt/software/kafka-eagle/bin/ke.sh start\n")])])]),s("h3",{attrs:{id:"停止脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止脚本"}},[a._v("#")]),a._v(" 停止脚本")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /opt/software/kafka_stop.sh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#!/bin/sh")]),a._v("\n/opt/software/zookeeper/bin/zkServer.sh stop\n/opt/software/kafka/bin/kafka-server-stop.sh\n/opt/software/kafka-eagle/bin/ke.sh stop\n")])])]),s("h3",{attrs:{id:"kafka启动、停止赋执行权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka启动、停止赋执行权限"}},[a._v("#")]),a._v(" kafka启动、停止赋执行权限")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x /opt/software/kafka_start.sh\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x /opt/software/kafka_stop.sh\n")])])]),s("h3",{attrs:{id:"kafka开机启动脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka开机启动脚本"}},[a._v("#")]),a._v(" kafka开机启动脚本")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /lib/systemd/system/kafka.service\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Unit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("Description")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("kafka\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("After")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("network.target\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("Type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("forking\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ExecStart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/kafka_start.sh\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ExecStop")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/kafka_stop.sh\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PrivateTmp")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Install"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("WantedBy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("multi-user.target\n")])])]),s("h3",{attrs:{id:"启动脚本重新加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动脚本重新加载"}},[a._v("#")]),a._v(" 启动脚本重新加载")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重新加载配置")]),a._v("\nsystemctl daemon-reload\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置开机启动")]),a._v("\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" kafka.service\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动")]),a._v("\nsystemctl start kafka.service\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止")]),a._v("\nsystemctl stop kafka.service\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看状态")]),a._v("\nsystemctl status kafka.service\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);