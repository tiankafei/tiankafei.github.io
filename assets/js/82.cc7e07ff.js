(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{465:function(a,t,s){"use strict";s.r(t);var e=s(54),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"centos7安装jenkins并配置使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装jenkins并配置使用"}},[a._v("#")]),a._v(" Centos7安装Jenkins并配置使用")]),a._v(" "),s("h2",{attrs:{id:"tomcat安装并设置开机启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tomcat安装并设置开机启动"}},[a._v("#")]),a._v(" Tomcat安装并设置开机启动")]),a._v(" "),s("h3",{attrs:{id:"拷贝tomat到指定目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拷贝tomat到指定目录"}},[a._v("#")]),a._v(" 拷贝tomat到指定目录")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" apache-tomcat-9.0.30.tar.gz /opt/\n")])])]),s("h3",{attrs:{id:"进入指定目录并解压tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进入指定目录并解压tomcat"}},[a._v("#")]),a._v(" 进入指定目录并解压tomcat")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zvxf apache-tomcat-9.0.30.tar.gz\n")])])]),s("h3",{attrs:{id:"删除原压缩包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除原压缩包"}},[a._v("#")]),a._v(" 删除原压缩包")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf apache-tomcat-9.0.30.tar.gz\n")])])]),s("h3",{attrs:{id:"设置tomcat启动的配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置tomcat启动的配置文件"}},[a._v("#")]),a._v(" 设置tomcat启动的配置文件")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/systemd/system/tomcat.service\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Unit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("Description")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Tomcat8080\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("After")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("syslog.target network.target remote-fs.target nss-lookup.target\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("Type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("oneshot\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ExecStart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/apache-tomcat-9.0.30/bin/startup.sh\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ExecStop")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/apache-tomcat-9.0.30/bin/shutdown.sh\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ExecReload")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/bin/kill -s HUP "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$MAINPID")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RemainAfterExit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("yes\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Install"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("WantedBy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("multi-user.target\n")])])]),s("h3",{attrs:{id:"设置开机启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动"}},[a._v("#")]),a._v(" 设置开机启动")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl daemon-reload\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" tomcat\nsystemctl start tomcat\nsystemctl status tomcat\n")])])]),s("h2",{attrs:{id:"jenkin安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkin安装"}},[a._v("#")]),a._v(" Jenkin安装")]),a._v(" "),s("h3",{attrs:{id:"下载jenkins安装使用的war包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载jenkins安装使用的war包"}},[a._v("#")]),a._v(" 下载Jenkins安装使用的war包")]),a._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http:")]),a._v("//mirrors.jenkins.io/war-stable/latest/jenkins.war\n")])])]),s("h3",{attrs:{id:"把jenkins-war拷贝到tomcat的webapp目录下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#把jenkins-war拷贝到tomcat的webapp目录下"}},[a._v("#")]),a._v(" 把jenkins.war拷贝到tomcat的webapp目录下")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" jenkins.war /opt/apache-tomcat-9.0.30/webapps/\n")])])]),s("h3",{attrs:{id:"可以通过以下地址进行访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可以通过以下地址进行访问"}},[a._v("#")]),a._v(" 可以通过以下地址进行访问")]),a._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[a._v("# http://ip:tomcat的端口/jenkins\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http:")]),a._v("//software:8080/jenkins/\n")])])]),s("h3",{attrs:{id:"接下来就根据提示步骤一步一步往下安装即可"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接下来就根据提示步骤一步一步往下安装即可"}},[a._v("#")]),a._v(" 接下来就根据提示步骤一步一步往下安装即可")]),a._v(" "),s("h2",{attrs:{id:"docker下安装jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker下安装jenkins"}},[a._v("#")]),a._v(" docker下安装jenkins")]),a._v(" "),s("h3",{attrs:{id:"拉取镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[a._v("#")]),a._v(" 拉取镜像")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("docker pull jenkins/jenkins:lts\n")])])]),s("h3",{attrs:{id:"启动jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动jenkins"}},[a._v("#")]),a._v(" 启动jenkins")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /opt/jenkins/data\n\ndocker run -d --name jenkins -v /opt/jenkins/data:/var/jenkins_home -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":8080 -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000")]),a._v(":50000 jenkins/jenkins:lts\n")])])]),s("h3",{attrs:{id:"启动失败-查看日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动失败-查看日志"}},[a._v("#")]),a._v(" 启动失败，查看日志")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 查看容器id")]),a._v("\ndocker "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" -a\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 查看容器日志")]),a._v("\ndocker logs 容器id\n")])])]),s("h3",{attrs:{id:"出现的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出现的问题"}},[a._v("#")]),a._v(" 出现的问题")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("touch: cannot touch '/var/jenkins_home/copy_reference_file.log': Permission denied\nCan not write to /var/jenkins_home/copy_reference_file.log. Wrong volume permissions?\n")])])]),s("h3",{attrs:{id:"解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[a._v("#")]),a._v(" 解决方案")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("使用docker安装jenkins，运行容器是出现错误：\n\ntouch: cannot touch '/var/jenkins_home/copy_reference_file.log': Permission denied\n\n出现这样的问题，是因为将docker内的jenkins卷映射到本地磁盘时，权限不对。默认情况下，映射到本地磁盘的权限用户是root,但是容器中jenkins user的uid为1000\n\n执行如下命令即可解决：\n\nchown -R 1000:1000 /opt/jenkins/data/\n")])])]),s("h3",{attrs:{id:"访问地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问地址"}},[a._v("#")]),a._v(" 访问地址")]),a._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http:")]),a._v("//192.168.0.22:8080\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);