(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{429:function(s,a,e){"use strict";e.r(a);var t=e(42),v=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"redisä»‹ç»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redisä»‹ç»"}},[s._v("#")]),s._v(" redisä»‹ç»")]),s._v(" "),e("h2",{attrs:{id:"redisåŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redisåŸç†"}},[s._v("#")]),s._v(" redisåŸç†")]),s._v(" "),e("blockquote",[e("p",[s._v("redisæ˜¯å•è¿›ç¨‹ï¼Œå•çº¿ç¨‹ï¼Œä¸ºä»€ä¹ˆè¿˜é‚£ä¹ˆå¿«ï¼Ÿ")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("å®Œå…¨åŸºäºå†…å­˜ï¼Œç»å¤§éƒ¨åˆ†è¯·æ±‚æ˜¯çº¯ç²¹çš„å†…å­˜æ“ä½œï¼Œéå¸¸å¿«é€Ÿã€‚å†…å­˜æ¯”ç£ç›˜å¿«äº†10Wå€")]),s._v(" "),e("p",[s._v("å†…å­˜å¯»å€æ˜¯ns(çº³ç§’)ï¼Œç£ç›˜å¯»å€æ˜¯ms(æ¯«ç§’)ï¼Œä¸­é—´å·®äº†10Wå€")])]),s._v(" "),e("li",[e("p",[s._v("ä½¿ç”¨å¤šè·¯I/Oå¤ç”¨æ¨¡å‹çš„éé˜»å¡IOï¼ŒRedisçš„Epoll äº‹ä»¶æ¨¡å‹å¤„ç†è¯·æ±‚ï¼Œä»»æ„ä¸€ä¸ªå®¢æˆ·ç«¯çš„èµ„æºå°±ç»ªä¹‹åå°±å¯ä»¥è¢«æ‰§è¡Œï¼Œä¸”èƒ½å¤Ÿé¡ºåºæ‰§è¡Œ")])]),s._v(" "),e("li",[e("p",[s._v("ç”±äºæ˜¯å•çº¿ç¨‹ï¼Œå› æ­¤å‡å°‘äº†çº¿ç¨‹åˆ‡æ¢çš„æ¶ˆè€—")])]),s._v(" "),e("li",[e("p",[s._v("æ”¯æŒç®¡é“ï¼Œä¸€æ¬¡å‘é€å¤šæ¬¡è¯·æ±‚ï¼Œå‡å°‘é¢‘ç¹IO")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("ä¸€æ¬¡æ€§å¤§é‡æ’å…¥æ•°æ®")])]),s._v(" "),e("li",[e("p",[s._v("ä»æ–‡ä»¶ä¸­æ‰¹é‡æ’å…¥æ•°æ®")]),s._v(" "),e("p",[s._v("æ–‡ä»¶çš„æ¢è¡Œç¬¦éœ€è¦æ³¨æ„ï¼šredis-cliä¸­åªæ”¯æŒdosæ ¼å¼çš„æ¢è¡Œç¬¦ "),e("code",[s._v("\\r\\n")]),s._v(" ï¼Œå¦‚æœä½ åœ¨Linuxä¸‹ã€Macä¸‹æˆ–è€…Windowsä¸‹åˆ›å»ºçš„æ–‡ä»¶ï¼Œæœ€å¥½éƒ½è½¬ä¸ªç ã€‚æ²¡æœ‰è½¬ç çš„æ–‡ä»¶,æ‰§è¡Œä¼šå¤±è´¥ã€‚")]),s._v(" "),e("p",[s._v("å®‰è£…è½¬ç å‘½ä»¤")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y unix2dos\n")])])])])])])])]),s._v(" "),e("h2",{attrs:{id:"linuxå†…æ ¸"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linuxå†…æ ¸"}},[s._v("#")]),s._v(" linuxå†…æ ¸")]),s._v(" "),e("blockquote",[e("p",[s._v("åœ¨linuxç³»ç»Ÿä¸­ï¼šâ€œä¸€åˆ‡çš†æ–‡ä»¶â€ã€‚æ¯ä¸€ä¸ªsocketè¿æ¥éƒ½ä¼šç”Ÿæˆä¸€äº›æ–‡ä»¶æè¿°ç¬¦ï¼Œç”±linuxå†…æ ¸æ¥æ”¶å¹¶è¿›è¡Œè½¬å‘ç»™åº”ç”¨è¿›ç¨‹æˆ–çº¿ç¨‹ã€‚")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æŸ¥çœ‹æ–‡ä»¶æè¿°")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /proc/è¿›ç¨‹idå·/fd\nll\n")])])])]),s._v(" "),e("h2",{attrs:{id:"rediså®‰è£…"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rediså®‰è£…"}},[s._v("#")]),s._v(" rediså®‰è£…")]),s._v(" "),e("blockquote",[e("ol",[e("li",[e("p",[s._v("å®‰è£…wgetå·¥å…·")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[s._v("ä¸‹è½½redis")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.redis.io/releases/redis-5.0.7.tar.gz\n")])])])]),s._v(" "),e("li",[e("p",[s._v("è§£å‹")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zvxf redis-5.0.7.tar.gz\n")])])])]),s._v(" "),e("li",[e("p",[s._v("è¿›å…¥æºç ç›®å½•")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-5.0.7/src\n")])])])]),s._v(" "),e("li",[e("p",[s._v("æ‰§è¡Œç¼–è¯‘")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum -y "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc gcc-c++ kernel-devel\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[s._v("è¿›å…¥æºç ç›®å½•ï¼ŒæŸ¥çœ‹æ˜¯å¦ç”Ÿæˆäº†å¯æ‰§è¡Œç¨‹åº")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("ll\n")])])])]),s._v(" "),e("li",[e("p",[s._v("é‡æ–°å®‰è£…åˆ°åˆ¶å®šç›®å½•")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PREFIX")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/redis5\n")])])])]),s._v(" "),e("li",[e("p",[s._v("è®¾ç½®redisç¯å¢ƒå˜é‡")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n")])])]),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/java/default\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDIS_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/redis5\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REDIS_HOME")]),s._v("/bin\n")])])]),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])])])]),s._v(" "),e("li",[e("p",[s._v("rediså®ä¾‹å®‰è£…")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-5.0.7/utils\n./install_server.sh\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#a)ä¸€ä¸ªç‰©ç†æœºä¸­å¯ä»¥æœ‰å¤šä¸ªrediså®ä¾‹ï¼ˆè¿›ç¨‹ï¼‰ï¼Œé€šè¿‡portåŒºåˆ†")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#b)å¯æ‰§è¡Œç¨‹åºå°±ä¸€ä»½åœ¨ç›®å½•ï¼Œä½†æ˜¯å†…å­˜ä¸­æœªæ¥çš„å¤šä¸ªå®ä¾‹éœ€è¦å„è‡ªçš„é…ç½®æ–‡ä»¶ï¼ŒæŒä¹…åŒ–ç›®å½•ç­‰èµ„æº")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#c)service   redis_6379  start/stop/stauts     >   linux   /etc/init.d/**** ")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#d)è„šæœ¬è¿˜ä¼šå¸®ä½ å¯åŠ¨ï¼")]),s._v("\n\nConfig "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" /etc/redis/6379.conf\nLog "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" /var/log/redis_6379.log\nData "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v("       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" /var/lib/redis/6379\nExecutable     "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" /usr/local/bin/redis-server\n")])])])]),s._v(" "),e("li",[e("p",[s._v("åœæ­¢redis")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" redis_6379 stop\n")])])])]),s._v(" "),e("li",[e("p",[s._v("å¯åŠ¨redis")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" redis_6379 start\n")])])])]),s._v(" "),e("li",[e("p",[s._v("æŸ¥çœ‹redisçŠ¶æ€")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" redis_6379 status\n")])])])]),s._v(" "),e("li",[e("p",[s._v("æŸ¥çœ‹rediså¯åŠ¨æ˜¯å¦æˆåŠŸ")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n")])])])]),s._v(" "),e("li",[e("p",[s._v("å®¢æˆ·ç«¯è¿æ¥å‘½ä»¤")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("redis-cli -h localhost -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" -a password\n")])])])]),s._v(" "),e("li",[e("p",[s._v("æ›´æ–°redisé…ç½®ï¼Œå¢åŠ å¯†ç ")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/redis/6379.conf\n")])])]),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.101\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# masterauth <master-password>")]),s._v("\nrequirepass tiankafei\n")])])])]),s._v(" "),e("li",[e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis_6379.service\n")])])])]),s._v(" "),e("li",[e("p",[s._v("è®¾ç½®å¯†ç ä¹‹åï¼Œåœæ­¢æœåŠ¡ä¼šæŠ¥é”™")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/init.d/redis_6379\n")])])]),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¢åŠ å¯†ç è¿™ä¸€è¡Œ")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $CONF"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^\\s*requirepass'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/\"//g'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $CLIEXEC -p $REDISPORT shutdown æ›¿æ¢ä¸º")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -z "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PASSWORD")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" \n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CLIEXEC")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REDISPORT")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CLIEXEC")]),s._v(" -a "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PASSWORD")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REDISPORT")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[s._v("é‡æ–°åŠ è½½")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("systemctl daemon-reload\n")])])])])])]),s._v(" "),e("h2",{attrs:{id:"redisä½¿ç”¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redisä½¿ç”¨"}},[s._v("#")]),s._v(" redisä½¿ç”¨")]),s._v(" "),e("blockquote",[e("ol",[e("li",[e("p",[s._v("æ­£åå‘ç´¢å¼•")]),s._v(" "),e("p",[s._v("æ­£å‘ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼šé¡ºåºä»0å¼€å§‹ï¼Œ+1")]),s._v(" "),e("p",[s._v("åå‘ï¼ˆä»å³åˆ°å·¦ï¼‰ï¼šé¡ºåºä»-1å¼€å§‹ï¼Œ-1")]),s._v(" "),e("p",[s._v("é€šè¿‡start=0,end=-1å¯ä»¥è·å–å½“å‰keyçš„æ‰€æœ‰æ•°æ®")])]),s._v(" "),e("li",[e("p",[s._v("Redis keyå€¼æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€å¯ä»¥ç”¨ä»»ä½•äºŒè¿›åˆ¶åºåˆ—ä½œä¸ºkeyå€¼")]),s._v(" "),e("p",[s._v("ä»å½¢å¦‚â€fooâ€çš„ç®€å•å­—ç¬¦ä¸²åˆ°ä¸€ä¸ªJPEGæ–‡ä»¶çš„å†…å®¹éƒ½å¯ä»¥ã€‚ç©ºå­—ç¬¦ä¸²ä¹Ÿæ˜¯æœ‰æ•ˆkeyå€¼ã€‚")])]),s._v(" "),e("li",[e("p",[s._v("å…³äºkeyçš„å‡ æ¡è§„åˆ™")]),s._v(" "),e("ol",[e("li",[s._v("å¤ªé•¿çš„é”®å€¼ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä¾‹å¦‚1024å­—èŠ‚çš„é”®å€¼å°±ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä¸ä»…å› ä¸ºæ¶ˆè€—å†…å­˜ï¼Œè€Œä¸”åœ¨æ•°æ®ä¸­æŸ¥æ‰¾è¿™ç±»é”®å€¼çš„è®¡ç®—æˆæœ¬å¾ˆé«˜ã€‚")]),s._v(" "),e("li",[s._v("å¤ªçŸ­çš„é”®å€¼é€šå¸¸ä¹Ÿä¸æ˜¯å¥½ä¸»æ„ï¼Œå¦‚æœä½ è¦ç”¨â€u:1000:pwdâ€æ¥ä»£æ›¿â€user:1000:passwordâ€ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†åè€…æ›´æ˜“é˜…è¯»ï¼Œå¹¶ä¸”ç”±æ­¤å¢åŠ çš„ç©ºé—´æ¶ˆè€—ç›¸å¯¹äºkey objectå’Œvalue objectæœ¬èº«æ¥è¯´å¾ˆå°ã€‚å½“ç„¶ï¼Œæ²¡äººé˜»æ­¢æ‚¨ä¸€å®šè¦ç”¨æ›´çŸ­çš„é”®å€¼èŠ‚çœä¸€ä¸ç‚¹å„¿ç©ºé—´ã€‚")]),s._v(" "),e("li",[s._v("æœ€å¥½åšæŒä¸€ç§æ¨¡å¼ã€‚ä¾‹å¦‚ï¼šâ€object-typeğŸ†”fieldâ€å°±æ˜¯ä¸ªä¸é”™çš„æ³¨æ„ï¼Œåƒè¿™æ ·â€user:1000:passwordâ€ã€‚æˆ‘å–œæ¬¢å¯¹å¤šå•è¯çš„å­—æ®µåä¸­åŠ ä¸Šä¸€ä¸ªç‚¹ï¼Œå°±åƒè¿™æ ·ï¼šâ€commentğŸ”¢reply.toâ€ã€‚")])])])])]),s._v(" "),e("h3",{attrs:{id:"stringï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€bitmap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stringï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€bitmap"}},[s._v("#")]),s._v(" stringï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€bitmap")]),s._v(" "),e("blockquote",[e("ol",[e("li",[e("p",[s._v("set å‘½ä»¤åé¢å¯ä»¥è·Ÿçš„å‚æ•°")]),s._v(" "),e("p",[s._v("nxï¼šå½“keyä¸å­˜åœ¨çš„æ—¶å€™ï¼Œæ‰ä¼šå»åˆ›å»ºï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šè¿”å›å¤±è´¥")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("åªèƒ½æ–°å»º\nåº”ç”¨åœºæ™¯ï¼šåˆ†å¸ƒå¼é”\nå¤šä¸ªçº¿ç¨‹åŒæ—¶ç”¨è¿™ä¸ªå‘½ä»¤è¿›è¡Œèµ‹å€¼ï¼Œè°èµ‹å€¼æˆåŠŸï¼Œè°å°±æ‹¿åˆ°äº†è¿™ä¸ªé”\n")])])]),e("p",[s._v("xxï¼šå½“keyå­˜åœ¨çš„æ—¶å€™ï¼Œæ‰å¯ä»¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›å¤±è´¥")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("åªèƒ½æ›´æ–°\n")])])])]),s._v(" "),e("li",[e("p",[s._v("keyä¸­ä¼šå­˜åœ¨ä¸€ä¸ªtypeï¼Œç”¨æ¥æè¿°å€¼å¾—æ•°æ®ç±»å‹ï¼Œç”¨æ¥åŒºåˆ†æ˜¯å­—ç¬¦ä¸²ã€æ•°å€¼ã€bitmap")]),s._v(" "),e("p",[s._v("é’ˆå¯¹å­—ç¬¦ä¸²å¯ä»¥æœ‰ä¸€äº›è¿ç®—api")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("åº”ç”¨åœºæ™¯ï¼š\næŠ¢è´­ï¼Œç§’æ€ï¼ˆæ‰£å‡åº“å­˜ï¼‰ï¼Œè¯¦æƒ…é¡µçš„æ•°å€¼ï¼Œç‚¹èµï¼Œè¯„è®º\nä¼˜ç‚¹ï¼š\nè§„é¿é«˜å¹¶å‘ä¸‹ï¼Œå¯¹æ•°æ®åº“çš„äº‹åŠ¡æ“ä½œï¼Œå®Œå…¨ç”±redisçš„å†…å­˜æ“ä½œä»£æ›¿\n")])])])]),s._v(" "),e("li",[e("p",[s._v("å¯¹äºæ•°å€¼å‹çš„è®¡ç®—èƒ½å¤Ÿä¿è¯å…¶åŸå­æ€§")]),s._v(" "),e("p",[s._v("INCRæ˜¯åŸå­æ“ä½œæ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯è¯´å³ä½¿å¤šä¸ªå®¢æˆ·ç«¯å¯¹åŒä¸€ä¸ªkeyå‘å‡ºINCRå‘½ä»¤ï¼Œä¹Ÿå†³ä¸ä¼šå¯¼è‡´ç«äº‰çš„æƒ…å†µã€‚ä¾‹å¦‚å¦‚ä¸‹æƒ…å†µæ°¸è¿œä¸å¯èƒ½å‘ç”Ÿï¼šã€å®¢æˆ·ç«¯1å’Œå®¢æˆ·ç«¯2åŒæ—¶è¯»å‡ºâ€œ10â€ï¼Œä»–ä»¬ä¿©éƒ½å¯¹å…¶åŠ åˆ°11ï¼Œç„¶åå°†æ–°å€¼è®¾ç½®ä¸º11ã€ã€‚æœ€ç»ˆçš„å€¼ä¸€å®šæ˜¯12ï¼Œread-increment-setæ“ä½œå®Œæˆä¹‹å‰ï¼Œå…¶ä»–å®¢æˆ·ç«¯ä¸ä¼šåœ¨åŒä¸€æ—¶é—´æ‰§è¡Œä»»ä½•å‘½ä»¤ã€‚")])]),s._v(" "),e("li",[e("p",[s._v("stringå€¼çš„é•¿åº¦ä¸èƒ½è¶…è¿‡512 MB")])])])]),s._v(" "),e("h3",{attrs:{id:"bit-arraysï¼šæˆ–è€…è¯´-simply-bitmaps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bit-arraysï¼šæˆ–è€…è¯´-simply-bitmaps"}},[s._v("#")]),s._v(" Bit arraysï¼šæˆ–è€…è¯´ simply bitmaps")]),s._v(" "),e("blockquote",[e("p",[s._v("é€šè¿‡ç‰¹æ®Šçš„å‘½ä»¤ï¼Œä½ å¯ä»¥å°† String å€¼å½“ä½œä¸€ç³»åˆ— bits å¤„ç†ï¼šå¯ä»¥è®¾ç½®å’Œæ¸…é™¤å•ç‹¬çš„ bitsï¼Œæ•°å‡ºæ‰€æœ‰è®¾ä¸º 1 çš„ bits çš„æ•°é‡ï¼Œæ‰¾åˆ°æœ€å‰çš„è¢«è®¾ä¸º 1 æˆ– 0 çš„ bitï¼Œç­‰ç­‰ã€‚")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("æŒ‰ä½(1ä¸ªå­—èŠ‚æœ‰8ä½)çš„ç´¢å¼•ï¼Œå€¼åªèƒ½æ˜¯0æˆ–1")])]),s._v(" "),e("li",[e("p",[s._v("setbitï¼ŒæŒ‡å®šçš„åç§»ä½ç½®æ˜¯ä½çš„ç´¢å¼•çš„ä½ç½®")])]),s._v(" "),e("li",[e("p",[s._v("bitposï¼Œåé¢è·Ÿçš„start,endæ˜¯å­—èŠ‚çš„ç´¢å¼•ä½ç½®ï¼Œè¿”å›çš„æ˜¯ä½çš„ç´¢å¼•ä½ç½®")])]),s._v(" "),e("li",[e("p",[s._v("bitcountï¼Œåé¢è·Ÿçš„start,endæ˜¯å­—èŠ‚çš„ç´¢å¼•ä½ç½®ï¼Œè¿”å›çš„æ˜¯å‡ºç°çš„æ¬¡æ•°")])]),s._v(" "),e("li",[e("p",[s._v("bitopï¼ŒæŒ‰ä½ä¸(æœ‰0åˆ™0ï¼Œå…¨1ä¸º1)ï¼ŒæŒ‰ä½æˆ–(æœ‰1åˆ™1ï¼Œå…¨0ä¸º0)")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ä½¿ç”¨åœºæ™¯ï¼š\n1. ç»Ÿè®¡ç”¨æˆ·ç™»å½•å¤©æ•°ï¼Œä¸”ä»»æ„æ—¶åˆ»æˆ–æ—¶é—´æ®µ\nbitcount key 0 -1ï¼ˆç»Ÿè®¡æ‰€æœ‰å¤©æ•°ç™»å½•çš„æ¬¡æ•°ä¹‹å’Œï¼‰\n\n2. ç”¨æˆ·åªè¦ç™»å½•ï¼Œå°±é€ç¤¼ç‰©ã€‚æœ‰2äº¿ç”¨æˆ·ï¼Œéœ€è¦å¤‡å¤šå°‘ç¤¼ç‰©\næ´»è·ƒç”¨æˆ·ç»Ÿè®¡ï¼š1-3å·è¿ç»­ç™»å½•ï¼Œå»é‡\nå¤©ä¸ºkeyï¼Œæ¯ä¸€ä¸ªç”¨æˆ·æœ‰å ä¸€ä½ä½œä¸ºå€¼ï¼Œæœ€åä½¿ç”¨bitcountæŒ‰ä½æˆ–è¿ç®—\n\n")])])])])])]),s._v(" "),e("h3",{attrs:{id:"hashï¼šç”±fieldå’Œå…³è”çš„valueç»„æˆçš„map"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hashï¼šç”±fieldå’Œå…³è”çš„valueç»„æˆçš„map"}},[s._v("#")]),s._v(" hashï¼šç”±fieldå’Œå…³è”çš„valueç»„æˆçš„map")]),s._v(" "),e("blockquote",[e("p",[s._v("å€¼çš„æ“ä½œç±»ä¼¼stringçš„å¤„ç†")]),s._v(" "),e("p",[s._v("å€¼å¦‚æœæ˜¯æ•°å€¼çš„æ—¶å€™ï¼Œå¯è¿›è¡Œæ•°å€¼æ“ä½œ")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("åº”ç”¨åœºæ™¯ï¼š\nè¯¦æƒ…é¡µçš„æ•°æ®é›†\n")])])])]),s._v(" "),e("h3",{attrs:{id:"listï¼šæŒ‰æ’å…¥é¡ºåºæ’åºçš„å­—ç¬¦ä¸²å…ƒç´ çš„é›†åˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#listï¼šæŒ‰æ’å…¥é¡ºåºæ’åºçš„å­—ç¬¦ä¸²å…ƒç´ çš„é›†åˆ"}},[s._v("#")]),s._v(" listï¼šæŒ‰æ’å…¥é¡ºåºæ’åºçš„å­—ç¬¦ä¸²å…ƒç´ çš„é›†åˆ")]),s._v(" "),e("blockquote",[e("p",[s._v("Redis listsåŸºäºåŒå‘Linked Listså®ç°ï¼Œkeyä¸Šé¢å­˜åœ¨ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæŒ‡å‘å¤´éƒ¨ï¼Œä¸€ä¸ªæŒ‡å‘å°¾éƒ¨ï¼Œè¿™æ„å‘³ç€å³ä½¿åœ¨ä¸€ä¸ªlistä¸­æœ‰æ•°ç™¾ä¸‡ä¸ªå…ƒç´ ï¼Œåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ“ä½œï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯å¸¸æ•°çº§åˆ«çš„ã€‚")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("lpush æœ€åä¸€ä¸ªpushçš„å€¼å§‹ç»ˆåœ¨å·¦ä¾§ï¼›rpush æœ€åä¸€ä¸ªpushçš„å€¼å§‹ç»ˆçš„å³ä¾§")])]),s._v(" "),e("li",[e("p",[s._v("lpop ä»å·¦ä¾§å¼€å§‹å–å€¼ï¼Œå–å‡ºä¹‹ååŒæ—¶åˆ é™¤ï¼›rpop ä»å³ä¾§å¼€å§‹å–å€¼ï¼Œå–å‡ºä¹‹ååŒæ—¶åˆ é™¤")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("lpush\tlpop\nrpush\trpop\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åè¿›å…ˆå‡º\tæ ˆ(åŒå‘å‘½ä»¤)")]),s._v("\nlpush\trpop\nrpush\tlpop\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å…ˆè¿›å…ˆå‡º\té˜Ÿåˆ—(åå‘å‘½ä»¤)")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[s._v("lrange key 0 -1å¾—åˆ°æ‰€æœ‰å€¼")])]),s._v(" "),e("li",[e("p",[s._v("lindex key index")])]),s._v(" "),e("li",[e("p",[s._v("lset key index value")])]),s._v(" "),e("li",[e("p",[s._v("lrem æ­£æ•°æ—¶ä»å·¦å¾€å³ç§»é™¤ï¼Œè´Ÿæ•°æ—¶ä»å³å¾€å·¦ç§»é™¤")])]),s._v(" "),e("li",[e("p",[s._v("linsert ä»å·¦å¾€å³æ‰¾åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶ååœ¨è¯¥å…ƒç´ ä¹‹å‰æˆ–è€…ä¹‹åæ’å…¥")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("index\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ•°ç»„")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[s._v("blpopã€brpop å¦‚æœæ²¡æœ‰keyçš„å€¼æ—¶ï¼Œåˆ™ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼›å¦‚æœæœ‰å€¼ï¼Œåˆ™ç›´æ¥æ‹¿å‡º")]),s._v(" "),e("p",[s._v("å½“å¤šä¸ªæ¶ˆè´¹è€…å–ä¸€ä¸ªkeyæ—¶ï¼Œç”Ÿäº§è€…ç”Ÿäº§äº†ä¸€ä¸ªkeyä»¥åï¼ŒæŒ‰ç…§æ¶ˆè´¹è€…çš„æ’é˜Ÿé¡ºåºè¿›è¡Œä¾æ¬¡å–å‡º")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å•æ’­é˜Ÿåˆ—ï¼ˆFIFOå…ˆè¿›å…ˆå‡ºï¼‰")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[s._v("ltrim å¯¹ä¸¤ç«¯çš„æ•°æ®è¿›è¡Œç§»é™¤")])])])]),s._v(" "),e("h3",{attrs:{id:"setï¼šä¸é‡å¤ä¸”æ— åºçš„å­—ç¬¦ä¸²å…ƒç´ çš„é›†åˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setï¼šä¸é‡å¤ä¸”æ— åºçš„å­—ç¬¦ä¸²å…ƒç´ çš„é›†åˆ"}},[s._v("#")]),s._v(" setï¼šä¸é‡å¤ä¸”æ— åºçš„å­—ç¬¦ä¸²å…ƒç´ çš„é›†åˆ")]),s._v(" "),e("blockquote",[e("p",[s._v("sadd k2 1 2 3 4 5")]),s._v(" "),e("p",[s._v("sadd k3 4 5 6 7 8")]),s._v(" "),e("ol",[e("li",[s._v("æ±‚äº¤é›†")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç›´æ¥æŠŠäº¤é›†ç»“æœè¿”å›")]),s._v("\nsinter k2 k3\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æŠŠäº¤é›†ç»“æœæ”¾åˆ°targetkeyä¸­")]),s._v("\nsinterstore targetkey k2 k3\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("æ±‚å¹¶é›†")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç›´æ¥æŠŠå¹¶é›†ç»“æœè¿”å›")]),s._v("\nsunion k2 k3\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æŠŠå¹¶é›†ç»“æœæ”¾åˆ°targetkeyä¸­")]),s._v("\nsunion targetkey k2 k3\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("æ±‚å·®é›†")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç›´æ¥æŠŠå·®é›†ç»“æœè¿”å›")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sdiff")]),s._v(" k2 k3\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sdiff")]),s._v(" k3 k2\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŠŠå·®é›†ç»“æœæ”¾åˆ°targetkeyä¸­")]),s._v("\nsdiffstore target k2 k3\nsdiffstore target k3 k2\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sdiff å…·æœ‰æ–¹å‘æ€§,å–å‡ºç¬¬ä¸€ä¸ªkeyçš„å·®é›†ï¼Œæƒ³è¦å–å‡ºç¬¬äºŒä¸ªçš„å·®é›†äº¤æ¢ä½ç½®å³å¯")]),s._v("\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("éšæœºå–å‡ºnä¸ªå€¼ï¼Œå€¼å¹¶ä¸ä»é›†åˆä¸­åˆ é™¤")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("srandmember key count -count\nå¦‚æœä¸ªæ•°ä¸ºæ­£æ•°ï¼Œè¿”å›çš„ç»“æœå¯èƒ½ä¼šå‡ºç°å°äºç­‰äº5çš„æƒ…å†µï¼Œä½†èƒ½å¤Ÿä¿è¯è¿”å›çš„ç»“æœä¸ä¼šæœ‰é‡å¤çš„å€¼å‡ºç°\nå¦‚æœä¸ªæ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™ä¼šä¸€ç›´è¿”å›5ä¸ªç»“æœé›†ï¼Œä½†å¹¶ä¸èƒ½ä¿è¯ç»“æœé›†å½“ä¸­æ˜¯å¦æœ‰é‡å¤çš„å€¼å‡ºç°\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åº”ç”¨åœºæ™¯ï¼š")]),s._v("\næŠ½å¥–ï¼šä¸€å…±æœ‰10ä¸ªå¥–å“ï¼›ç”¨æˆ·æ•°å¯èƒ½å°äº10ä¸ªï¼Œä¹Ÿå¯èƒ½å¤§äº10ä¸ªï¼›ä¸­å¥–ä¹Ÿåˆ†æ˜¯å¦å¯ä»¥é‡å¤ä¸­å¥–\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("spop éšæœºå–å‡ºä¸€ä¸ªå€¼ï¼Œå¹¶ä»é›†åˆä¸­åˆ é™¤")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åº”ç”¨åœºæ™¯ï¼š")]),s._v("\nå¹´ä¼šæŠ½å¥–ï¼šä¸€ä¸ªäººåªèƒ½æŠ½ä¸­å¥–ä¸€æ¬¡ï¼Œä¸­å¥–ç‡ä¼šä¸æ–­å˜åŒ–\n")])])])]),s._v(" "),e("h3",{attrs:{id:"sorted-setï¼šé€šè¿‡scoreå€¼è¿›è¡Œæ’åºçš„é›†åˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sorted-setï¼šé€šè¿‡scoreå€¼è¿›è¡Œæ’åºçš„é›†åˆ"}},[s._v("#")]),s._v(" sorted setï¼šé€šè¿‡scoreå€¼è¿›è¡Œæ’åºçš„é›†åˆ")]),s._v(" "),e("blockquote",[e("p",[s._v("ç±»ä¼¼Sets,ä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²å…ƒç´ éƒ½å…³è”åˆ°ä¸€ä¸ªå«"),e("em",[s._v("score")]),s._v("æµ®åŠ¨æ•°å€¼ï¼ˆfloating number valueï¼‰ã€‚é‡Œé¢çš„å…ƒç´ æ€»æ˜¯é€šè¿‡scoreè¿›è¡Œç€æ’åºï¼Œæ‰€ä»¥ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯å¯ä»¥æ£€ç´¢çš„ä¸€ç³»åˆ—å…ƒç´ ã€‚ï¼ˆä¾‹å¦‚ä½ å¯èƒ½ä¼šé—®ï¼šç»™æˆ‘å‰é¢10ä¸ªæˆ–è€…åé¢10ä¸ªå…ƒç´ ï¼‰ã€‚æ¯ä¸ªå€¼éƒ½ä¼šå…³è”ä¸€ä¸ªåˆ†æ•°ã€‚å¦‚æœåˆ†å€¼ä¸€æ ·ï¼Œé»˜è®¤æŒ‰ç…§åç§°æ’åº")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("é¦–å…ˆæ˜¯ä¸€ä¸ªå»é‡çš„é›†åˆï¼Œå¦‚æœæœ‰ç›¸åŒçš„å€¼ï¼Œåˆ™åˆ†æ•°éœ€è¦è¿›è¡Œèšåˆï¼Œ")]),s._v(" "),e("p",[s._v("èšåˆçš„ç§ç±»ï¼šæœ€å°å€¼ã€æœ€å¤§å€¼ã€æ±‚ä¸ªã€å¹³å‡å€¼ã€æƒé‡")])]),s._v(" "),e("li",[e("p",[s._v("æ ¹æ®åˆ†æ•°è¿›è¡Œæ’åº")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æŒ‰ç…§åˆ†å€¼ä»å°åˆ°å¤§æ’åºï¼ˆç‰©ç†å†…å­˜å·¦å°å³å¤§ï¼‰")]),s._v("\nzadd k1 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" apple "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" banana "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" orange\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æŸ¥çœ‹k1çš„æ•°æ®é›†åˆ")]),s._v("\nzrange k1 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -1 withscores\n")])])])]),s._v(" "),e("li",[e("p",[s._v("æŒ‰ç…§åˆ†å€¼å–æ•°")]),s._v(" "),e("p",[s._v("zrangebyscore k1 2 4 å–å‡ºåˆ†å€¼èŒƒå›´å†…çš„æ•°æ®(åŒ…å«æœ€å°å€¼å’Œæœ€å¤§å€¼çš„ç»“æœ)")])]),s._v(" "),e("li",[e("p",[s._v("å–å‡ºtopæˆ–è€…low")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æœ€å°çš„nä¸ª downn")]),s._v("\nZRANGE k1 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" downn\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æœ€å¤§çš„nä¸ª topn")]),s._v("\nZREVRANGE k1 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" topn\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç”¨è´Ÿæ•°ä»…ä»…æ˜¯ä»nçš„é‚£ä¸ªä½ç½®ä¸€ç›´åˆ°æœ€åï¼Œä¾ç„¶æ˜¯å·¦å°å³å¤§ï¼Œä¾ç„¶æ˜¯ä»å°åˆ°å¤§æ’çš„")]),s._v("\nZRANGE k1 -topn -1\n")])])])]),s._v(" "),e("li",[e("p",[s._v("å¯ä»¥å¯¹åˆ†å€¼è¿›è¡Œæ“ä½œï¼Œæ“ä½œåä¹‹åï¼Œæ—¶æ—¶æ ¹æ®åˆ†å€¼è¿›è¡Œæ’åº")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ’åºæ˜¯å¦‚ä½•å®ç°çš„")]),s._v("\nå­˜å‚¨ç»“æ„ï¼šskip list"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("è·³è·ƒè¡¨"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nä¸€çº§ç´¢å¼•ï¼ˆåœ¨åŸé“¾è¡¨çš„åŸºç¡€ä¸Šï¼Œå…ƒç´ éšæœºå‡ºç°ä¸€çº§ç´¢å¼•ä½ç½®ï¼‰\näºŒçº§ç´¢å¼•ï¼ˆåœ¨ä¸€çº§ç´¢å¼•çš„åŸºç¡€ä¸Šï¼Œå…ƒç´ éšæœºå‡ºç°åœ¨äºŒçº§ç´¢å¼•çš„ä½ç½®ï¼‰\nä¸‰çº§ç´¢å¼•"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".åŒç†\nä»æœ€å°çš„ç´¢å¼•ä½ç½®ï¼Œä¸€ç›´æ‰¾åˆ°åŸé“¾è¡¨çš„ä½ç½®ï¼Œç„¶åè¿›è¡Œæ›´æ–°ç´¢å¼•\n")])])])]),s._v(" "),e("li",[e("p",[s._v("é›†åˆæ“ä½œï¼š")]),s._v(" "),e("p",[s._v("æ”¯æŒäº¤é›†ï¼šåˆ†å€¼éœ€è¦èšåˆ")]),s._v(" "),e("p",[s._v("æ”¯æŒå¹¶é›†ï¼šåˆ†å€¼éœ€è¦èšåˆ")]),s._v(" "),e("p",[s._v("æ”¯æŒå·®é›†")])])])]),s._v(" "),e("h2",{attrs:{id:"rediså‘å¸ƒè®¢é˜…"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rediså‘å¸ƒè®¢é˜…"}},[s._v("#")]),s._v(" rediså‘å¸ƒè®¢é˜…")]),s._v(" "),e("blockquote",[e("p",[s._v("ä¸€ä¸ªå‘å¸ƒè€…ï¼Œå¤šä¸ªå®¢æˆ·ç«¯éƒ½å¯ä»¥æ¥æ”¶")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç›‘å¬ç®¡é“ï¼šåªèƒ½æ¥æ”¶åˆ°ç›‘å¬ä¹‹åå®¢æˆ·ç«¯å‘çš„æ¶ˆæ¯ï¼Œç›‘å¬ä¹‹å‰å®¢æˆ·ç«¯å‘çš„æ¶ˆæ¯æ¥æ”¶ä¸åˆ°")]),s._v("\nSUBSCRIBE ç®¡é“åç§°\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®¢æˆ·ç«¯å¾€ç®¡é“é‡Œé¢æ”¾æ¶ˆæ¯")]),s._v("\nPUBLISH ç®¡é“åç§° message\n\nåº”ç”¨åœºæ™¯ï¼š\nç›´æ’­ï¼Œç¾¤èŠ\n")])])]),e("p",[s._v("èŠå¤©è®°å½•å­˜å‚¨ï¼šæ•°æ®åº“å­˜å‚¨å…¨é‡æ•°æ®")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("å®æ—¶çš„è®°å½•ï¼šå­˜å‚¨åˆ°redisï¼Œä½¿ç”¨å‘å¸ƒè®¢é˜…è¿›è¡Œæ¶ˆæ¯æ¥æ”¶ï¼Œæ•°æ®å¯ä»¥å¼‚æ­¥å­˜å‚¨åˆ°æ•°æ®åº“")])]),s._v(" "),e("li",[e("p",[s._v("3å¤©å†…å†å²è®°å½•ï¼šå­˜å‚¨åˆ°redisï¼Œä½¿ç”¨sort setï¼ŒæŠŠæ—¶é—´ä½œä¸ºè®°å½•çš„åˆ†å€¼")]),s._v(" "),e("p",[s._v("ZREMRANGEBYRANKï¼ŒæŒ‰ç…§ç´¢å¼•ä½ç½®è¿›è¡Œåˆ é™¤")]),s._v(" "),e("p",[s._v("ZREMRANGEBYSCOREï¼ŒæŒ‰ç…§åˆ†å€¼è¿›è¡Œåˆ é™¤ï¼Œå› ä¸ºæ—¶é—´æ˜¯åˆ†å€¼ï¼Œå¯ä»¥ä»…ä»…ä¿ç•™3å¤©å†…çš„æ•°æ®")])]),s._v(" "),e("li",[e("p",[s._v("æ›´ä¹…ä¹‹å‰çš„å†å²è®°å½•ï¼Œå­˜å‚¨åˆ°æ•°æ®åº“ï¼Œä»æ•°æ®åº“æŸ¥è¯¢")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("clinet------\x3eredis")])]),s._v(" "),e("li",[e("p",[s._v("redis------\x3eother clinet")]),s._v(" "),e("p",[s._v("redis------\x3eother reidså­˜å‚¨sort set")]),s._v(" "),e("p",[s._v("redis------\x3eservice------\x3ekafka------\x3edbservice------\x3emysql")])])])])])]),s._v(" "),e("h2",{attrs:{id:"redisäº‹åŠ¡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redisäº‹åŠ¡"}},[s._v("#")]),s._v(" redisäº‹åŠ¡")]),s._v(" "),e("blockquote",[e("p",[s._v("å› ä¸ºredisæ˜¯å•è¿›ç¨‹ï¼Œå•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å½“å¤šä¸ªå®¢æˆ·ç«¯å‘é€äº‹åŠ¡æ—¶ï¼Œæ ¹æ®å“ªä¸ªå®¢æˆ·ç«¯å‘å‡ºçš„execå…ˆåˆ°è¾¾ï¼Œåˆ™å…ˆæ‰§è¡Œå“ªä¸ªå®¢æˆ·ç«¯çš„äº‹åŠ¡ï¼Œå…¶ä»–çš„å®¢æˆ·ç«¯å‘å‡ºçš„äº‹åŠ¡æœ‰å¯èƒ½ä¼šæŠ¥é”™ï¼Œæœ‰å¯èƒ½ä¼šè¢«æ’¤é”€ï¼Œä¸»è¦çœ‹æ˜¯å¦ä½¿ç”¨äº†watchå‘½ä»¤ã€‚")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("watchï¼šä½¿ç”¨ä¹è§‚é”çš„æ–¹å¼è¿›è¡Œç›‘å¬æ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœæ•°æ®æ²¡æœ‰å˜åŒ–ï¼Œåˆ™äº‹åŠ¡ä¼šæ‰§è¡Œï¼›å¦‚æœå€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™äº‹åŠ¡è‡ªåŠ¨æ’¤é”€ï¼Œä¸æ‰§è¡Œä»»ä½•è¯­å¥ã€‚")]),s._v(" "),e("p",[s._v("ä½¿ç”¨æ— å‚æ•°çš„unwatchå‘½ä»¤å¯ä»¥å–æ¶ˆç›‘è§†")])]),s._v(" "),e("li",[e("p",[s._v("multiï¼šå¼€å¯äº‹åŠ¡")])]),s._v(" "),e("li",[e("p",[s._v("execï¼šæ‰§è¡Œæ‰€æœ‰è¯­å¥ã€‚å½“EXECè¢«è°ƒç”¨æ—¶ï¼Œä¸ç®¡äº‹åŠ¡æ˜¯å¦æˆåŠŸæ‰§è¡Œï¼Œå¯¹æ‰€æœ‰é”®çš„ç›‘è§†éƒ½ä¼šè¢«å–æ¶ˆã€‚")]),s._v(" "),e("p",[s._v("å¦å¤–ï¼Œå½“å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æ—¶ï¼Œè¯¥å®¢æˆ·ç«¯å¯¹é”®çš„ç›‘è§†ä¹Ÿä¼šè¢«å–æ¶ˆã€‚")])]),s._v(" "),e("li",[e("p",[s._v("discardï¼šæ’¤é”€äº‹åŠ¡ã€‚å½“æ‰§è¡ŒDISCARDå‘½ä»¤æ—¶ï¼Œäº‹åŠ¡ä¼šè¢«æ”¾å¼ƒï¼Œäº‹åŠ¡é˜Ÿåˆ—ä¼šè¢«æ¸…ç©ºï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä¼šä»äº‹åŠ¡çŠ¶æ€ä¸­é€€å‡ºã€‚")])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("å¯¹äºæ•°å€¼å‹çš„è®¡ç®—ï¼Œrediså¯ä»¥ä¿è¯å…¶åŸå­æ€§")])])])]),s._v(" "),e("p",[e("strong",[s._v("ä¸ºä»€ä¹ˆ Redis ä¸æ”¯æŒå›æ»šï¼ˆroll backï¼‰")])]),s._v(" "),e("p",[s._v("å¦‚æœä½ æœ‰ä½¿ç”¨å…³ç³»å¼æ•°æ®åº“çš„ç»éªŒï¼Œ é‚£ä¹ˆ â€œRedis åœ¨äº‹åŠ¡å¤±è´¥æ—¶ä¸è¿›è¡Œå›æ»šï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä½™ä¸‹çš„å‘½ä»¤â€è¿™ç§åšæ³•å¯èƒ½ä¼šè®©ä½ è§‰å¾—æœ‰ç‚¹å¥‡æ€ªï¼Œä»¥ä¸‹æ˜¯è¿™ç§åšæ³•çš„ä¼˜ç‚¹ï¼š")]),s._v(" "),e("ol",[e("li",[s._v("Redis å‘½ä»¤åªä¼šå› ä¸ºé”™è¯¯çš„è¯­æ³•è€Œå¤±è´¥ï¼ˆå¹¶ä¸”è¿™äº›é—®é¢˜ä¸èƒ½åœ¨å…¥é˜Ÿæ—¶å‘ç°ï¼‰ï¼Œæˆ–æ˜¯å‘½ä»¤ç”¨åœ¨äº†é”™è¯¯ç±»å‹çš„é”®ä¸Šé¢ï¼šè¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œä»å®ç”¨æ€§çš„è§’åº¦æ¥è¯´ï¼Œå¤±è´¥çš„å‘½ä»¤æ˜¯ç”±ç¼–ç¨‹é”™è¯¯é€ æˆçš„ï¼Œè€Œè¿™äº›é”™è¯¯åº”è¯¥åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­è¢«å‘ç°ï¼Œè€Œä¸åº”è¯¥å‡ºç°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­")]),s._v(" "),e("li",[s._v("å› ä¸ºä¸éœ€è¦å¯¹å›æ»šè¿›è¡Œæ”¯æŒï¼Œæ‰€ä»¥ Redis çš„å†…éƒ¨å¯ä»¥ä¿æŒç®€å•ä¸”å¿«é€Ÿ")])]),s._v(" "),e("p",[s._v("æœ‰ç§è§‚ç‚¹è®¤ä¸º Redis å¤„ç†äº‹åŠ¡çš„åšæ³•ä¼šäº§ç”Ÿ bugï¼Œç„¶è€Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œå›æ»šå¹¶ä¸èƒ½è§£å†³ç¼–ç¨‹é”™è¯¯å¸¦æ¥çš„é—®é¢˜ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æœ¬æ¥æƒ³é€šè¿‡INCRå‘½ä»¤å°†é”®çš„å€¼åŠ ä¸Š1ï¼Œå´ä¸å°å¿ƒåŠ ä¸Šäº†2ï¼Œåˆæˆ–è€…å¯¹é”™è¯¯ç±»å‹çš„é”®æ‰§è¡Œäº†INCRï¼Œå›æ»šæ˜¯æ²¡æœ‰åŠæ³•å¤„ç†è¿™äº›æƒ…å†µçš„ã€‚")])]),s._v(" "),e("h2",{attrs:{id:"redisç©¿é€"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redisç©¿é€"}},[s._v("#")]),s._v(" redisç©¿é€")]),s._v(" "),e("blockquote",[e("p",[s._v("ç¼“å­˜ç©¿é€ï¼Œæ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªæ•°æ®åº“ä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œä»è€Œä¼šè®©æ•°æ®åº“å¤šåšå¾ˆå¤šæ— ç”¨çš„æ“ä½œï¼Œå¦‚æœå¹¶å‘é‡å¤§ï¼Œæˆ–è€…æ¶æ„æ”»å‡»ï¼Œä¼šé€ æˆæ•°æ®åº“æ‰¿æ‹…å¾ˆå¤§çš„å‹åŠ›ï¼Œæ›´æœ‰ç”šè€…ä¼šé€ æˆå®•æœºã€‚")])]),s._v(" "),e("blockquote",[e("p",[s._v("ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆï¼š")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("ç¼“å­˜ç©ºå¯¹è±¡ï¼Œå½“è¯·æ±‚åˆ°è¾¾æ•°æ®åº“æ—¶ï¼Œå¦‚æœæŸ¥è¯¢ç»“æœä¸ºç©ºï¼Œå¯å°†ç©ºå€¼æ”¾å…¥ç¼“å­˜ï¼Œéœ€è¦å¢åŠ è¿‡æœŸæ—¶é—´ã€‚")])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("å¸ƒéš†è¿‡æ»¤å™¨")]),s._v("æ‹¦æˆªï¼ŒæŠŠè¦æŸ¥è¯¢çš„æ•°æ®ç¼“å­˜èµ·æ¥ï¼ˆé€šè¿‡äºŒè¿›åˆ¶å‘é‡å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•°ï¼Œè¾¾åˆ°å ç”¨è¾ƒå°‘çš„å†…å­˜ï¼Œç¼“å­˜è¾ƒå¤§çš„æ•°æ®é‡ï¼‰ï¼Œä½†æ˜¯å¹¶ä¸èƒ½è¾¾åˆ°ç™¾åˆ†ä¹‹ç™¾çš„æ‹¦æˆªï¼Œå½“è¯·æ±‚è¿‡æ¥æ—¶ï¼Œå†ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œç¼“å­˜ç©ºå€¼ï¼Œå¯ä»¥è¾ƒå¤§ç¨‹åº¦ä¸Šå‡å°‘ç¼“å­˜ç©¿é€çš„æƒ…å†µã€‚")]),s._v(" "),e("p",[s._v("å¸ƒéš†è¿‡æ»¤å™¨ï¼š")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/RedisBloom/RedisBloom/archive/master.zip\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" master.zip\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" RedisBloom-master\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" redisbloom.so /usr/local/redis5\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" redis_6379 stop\nredis-server --loadmodule /usr/local/redis5/redisbloom.so\n")])])]),e("p",[s._v("åŸç†")]),s._v(" "),e("ol",[e("li",[s._v("ä½ æœ‰å•¥")]),s._v(" "),e("li",[s._v("æœ‰çš„åƒbitmapä¸­æ ‡è®°")]),s._v(" "),e("li",[s._v("è¯·æ±‚çš„å¯èƒ½è¢«è¯¯æ ‡è®°")]),s._v(" "),e("li",[s._v("ä½†æ˜¯ä¸€å®šæ¦‚ç‡ä¼šå¤§é‡å‡å°‘æ”¾è¡Œï¼Œç©¿é€")]),s._v(" "),e("li",[s._v("è€Œä¸”æˆæœ¬ä½")])]),s._v(" "),e("p",[s._v("ä½¿ç”¨bitmapè¿›è¡Œå­˜å‚¨ï¼Œæ•°æ®åº“é‡Œæœ‰çš„å…ƒç´ (æ ¹æ®ä»€ä¹ˆè¿›è¡Œæœæœï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªæ•°æ®æ”¾åˆ°bitmapé‡Œ)çš„æ˜ å°„å…³ç³»")]),s._v(" "),e("p",[s._v("ä¸€ä¸ªå…ƒç´ ä¼šç»è¿‡nä¸ªæˆ–è€…kä¸ªä¸åŒçš„æ˜ å°„å‡½æ•°ï¼Œä¼šæŠŠç›¸å¯¹åº”çš„ä½ç½®ç”±0å˜ä¸º1ï¼Œå¤šä¸ªå…ƒç´ äº§ç”Ÿçš„ç»“æœå¯èƒ½ä¼šå‡ºç°ç¢°æ’ï¼Œæœ‰ä¸€å®šçš„å‡ ç‡éƒ½æ˜¯1")]),s._v(" "),e("p",[s._v("ç”¨æˆ·è¯·æ±‚è¿‡æ¥æ—¶ï¼Œæœç´¢çš„å…ƒç´ ç»è¿‡bitmapæ˜ å°„å¾—åˆ°0æ—¶ï¼Œè¯´æ˜æ•°æ®åº“é‡Œä¸€å®šæ²¡æœ‰ï¼Œæ­¤æ—¶å°±å¯ä»¥è¿”å›äº†ã€‚å¦‚æœå¾—åˆ°1æ—¶ï¼Œè¯´æ˜æ•°æ®åº“æœ‰çš„å‡ ç‡å¾ˆå¤§ï¼Œå°±å¯ä»¥æ”¾è¡Œï¼Œåˆ°æ•°æ®åº“é‡Œè¿›è¡ŒæŸ¥è¯¢ã€‚ä¸º1æ—¶æ•°æ®åº“é‡Œæ²¡æœ‰çš„å‡ ç‡å¾ˆå°ï¼Œä¸€èˆ¬ä¸ä¼šè¶…è¿‡ç™¾åˆ†ä¹‹1ã€‚")])])])]),s._v(" "),e("blockquote",[e("p",[s._v("å…¶ä»–è¿‡æ»¤å™¨")]),s._v(" "),e("ol",[e("li",[s._v("Bloom Filter ç³»åˆ—æ”¹è¿›ä¹‹Counting Bloom Filter")]),s._v(" "),e("li",[s._v("å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨")])])]),s._v(" "),e("h2",{attrs:{id:"redisç¼“å­˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redisç¼“å­˜"}},[s._v("#")]),s._v(" redisç¼“å­˜")]),s._v(" "),e("blockquote",[e("p",[s._v("ç¼“å­˜å’Œæ•°æ®åº“çš„å·®åˆ«ï¼š")]),s._v(" "),e("ol",[e("li",[s._v("ç¼“å­˜çš„æ•°æ®æ˜¯ä¸é‡è¦çš„")]),s._v(" "),e("li",[s._v("ç¼“å­˜çš„æ•°æ®ä¸æ˜¯å…¨é‡çš„")]),s._v(" "),e("li",[s._v("ç¼“å­˜åº”è¯¥éšç€è®¿é—®è¿›è¡Œå˜åŒ–ï¼Œåº”è¯¥æ˜¯ç»å¸¸è®¿é—®çš„çƒ­æ•°æ®ï¼ˆå†…å­˜å¤§å°æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¹Ÿå°±æ˜¯å…¶ç“¶é¢ˆï¼‰")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# æ§åˆ¶æœ€å¤§å†…å­˜(1-10G)\nmaxmemory bytes\n#å†…å­˜è¾¾åˆ°æœ€å¤§å€¼æ—¶ï¼Œé…ç½®é©±é€ç­–ç•¥\nmaxmemory-policy noeviction\n1. noeviction é»˜è®¤å€¼ï¼šè¿”å›é”™è¯¯å½“å†…å­˜é™åˆ¶è¾¾åˆ°å¹¶ä¸”å®¢æˆ·ç«¯å°è¯•æ‰§è¡Œä¼šè®©æ›´å¤šå†…å­˜è¢«ä½¿ç”¨çš„å‘½ä»¤ï¼ˆå¤§éƒ¨åˆ†çš„å†™å…¥æŒ‡ä»¤ï¼Œä½†DELå’Œå‡ ä¸ªä¾‹å¤–ï¼‰\n2. allkeys-lru  å°è¯•å›æ”¶æœ€å°‘ä½¿ç”¨çš„é”®ï¼ˆLRUï¼‰ï¼Œä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ã€‚\n3. volatile-lru å°è¯•å›æ”¶æœ€å°‘ä½¿ç”¨çš„é”®ï¼ˆLRUï¼‰ï¼Œä½†ä»…é™äºåœ¨è¿‡æœŸé›†åˆçš„é”®,ä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ã€‚\n4. allkeys-random å›æ”¶éšæœºçš„é”®ä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ã€‚\n5. volatile-random å›æ”¶éšæœºçš„é”®ä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ï¼Œä½†ä»…é™äºåœ¨è¿‡æœŸé›†åˆçš„é”®ã€‚\n6. volatile-ttl å›æ”¶åœ¨è¿‡æœŸé›†åˆçš„é”®ï¼Œå¹¶ä¸”ä¼˜å…ˆå›æ”¶å­˜æ´»æ—¶é—´ï¼ˆTTLï¼‰è¾ƒçŸ­çš„é”®,ä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ã€‚ï¼ˆæ‰¾é‚£ä¸ªç¦»è¿‡æœŸæ—¶é—´æœ€è¿‘çš„keyå‰”é™¤æ‰ï¼‰\n\nallkeysï¼ˆæ‰€æœ‰çš„keyï¼‰ã€volatileï¼ˆé©¬ä¸Šè¦è¿‡æœŸçš„keyï¼‰\nLFUï¼ˆæœ€å°‘ä½¿ç”¨æ¬¡æ•°ï¼Œç¢°äº†å¤šå°‘æ¬¡ï¼‰\nLRUï¼ˆæœ€å°‘æ²¡æœ‰ç”¨ï¼šå¤šä¹…æ²¡ç¢°ï¼‰\n\nä½œä¸ºç¼“å­˜æ—¶ï¼šä¸€å®šä¸èƒ½ç”¨noeviction\nä½œä¸ºæ•°æ®åº“æ—¶ï¼šä¸€å®šè¦ç”¨noeviction\n")])])]),e("p",[s._v("ä¸€èˆ¬çš„ç»éªŒè§„åˆ™")]),s._v(" "),e("ul",[e("li",[s._v("å¦‚æœæ²¡æœ‰é”®æ»¡è¶³å›æ”¶çš„å‰ææ¡ä»¶çš„è¯ï¼Œç­–ç•¥"),e("strong",[s._v("volatile-lru")]),s._v(", "),e("strong",[s._v("volatile-random")]),s._v("ä»¥åŠ"),e("strong",[s._v("volatile-ttl")]),s._v("å°±å’Œnoeviction å·®ä¸å¤šäº†")]),s._v(" "),e("li",[s._v("ä½¿ç”¨"),e("strong",[s._v("allkeys-lru")]),s._v("ç­–ç•¥ï¼šå½“ä½ å¸Œæœ›ä½ çš„è¯·æ±‚ç¬¦åˆä¸€ä¸ªå¹‚å®šå¾‹åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¸Œæœ›éƒ¨åˆ†çš„å­é›†å…ƒç´ å°†æ¯”å…¶å®ƒå…¶å®ƒå…ƒç´ è¢«è®¿é—®çš„æ›´å¤šã€‚å¦‚æœä½ ä¸ç¡®å®šé€‰æ‹©ä»€ä¹ˆï¼Œè¿™æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚.")]),s._v(" "),e("li",[s._v("ä½¿ç”¨"),e("strong",[s._v("allkeys-random")]),s._v("ï¼šå¦‚æœä½ æ˜¯å¾ªç¯è®¿é—®ï¼Œæ‰€æœ‰çš„é”®è¢«è¿ç»­çš„æ‰«æï¼Œæˆ–è€…ä½ å¸Œæœ›è¯·æ±‚åˆ†å¸ƒæ­£å¸¸ï¼ˆæ‰€æœ‰å…ƒç´ è¢«è®¿é—®çš„æ¦‚ç‡éƒ½å·®ä¸å¤šï¼‰ã€‚")]),s._v(" "),e("li",[s._v("ä½¿ç”¨"),e("strong",[s._v("volatile-ttl")]),s._v("ï¼šå¦‚æœä½ æƒ³è¦é€šè¿‡åˆ›å»ºç¼“å­˜å¯¹è±¡æ—¶è®¾ç½®TTLå€¼ï¼Œæ¥å†³å®šå“ªäº›å¯¹è±¡åº”è¯¥è¢«è¿‡æœŸã€‚")]),s._v(" "),e("li",[e("strong",[s._v("allkeys-lru")]),s._v(" å’Œ "),e("strong",[s._v("volatile-random")]),s._v("ç­–ç•¥å¯¹äºå½“ä½ æƒ³è¦å•ä¸€çš„å®ä¾‹å®ç°ç¼“å­˜åŠæŒä¹…åŒ–ä¸€äº›é”®æ—¶å¾ˆæœ‰ç”¨ã€‚ä¸è¿‡ä¸€èˆ¬è¿è¡Œä¸¤ä¸ªå®ä¾‹æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„æ›´å¥½æ–¹æ³•")])]),s._v(" "),e("p",[s._v("é€‰æ‹©æ­£ç¡®çš„å›æ”¶ç­–ç•¥æ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™å–å†³äºä½ çš„åº”ç”¨çš„è®¿é—®æ¨¡å¼ï¼Œä¸è¿‡ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶è¿›è¡Œç›¸å…³çš„ç­–ç•¥è°ƒæ•´ï¼Œå¹¶ä¸”ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡å’Œæ²¡å‘½ä¸­çš„æ¬¡æ•°ï¼Œé€šè¿‡RedisINFOå‘½ä»¤è¾“å‡ºä»¥ä¾¿è°ƒä¼˜ã€‚")])]),s._v(" "),e("h2",{attrs:{id:"redis-è¿‡æœŸæ—¶é—´"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-è¿‡æœŸæ—¶é—´"}},[s._v("#")]),s._v(" redis è¿‡æœŸæ—¶é—´")]),s._v(" "),e("blockquote",[e("p",[s._v("è¿‡æœŸæ—¶é—´ï¼šä½ å¯ä»¥å¯¹keyè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œå½“è¿™ä¸ªæ—¶é—´åˆ°è¾¾åä¼šè¢«åˆ é™¤ã€‚ç²¾åº¦å¯ä»¥ä½¿ç”¨æ¯«ç§’æˆ–ç§’ã€‚")]),s._v(" "),e("p",[s._v("EXPIRE key æ—¶é—´\tè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå€’è®¡æ—¶ï¼Œå®šæ—¶ï¼‰")]),s._v(" "),e("p",[s._v("PERSIST key æ—¶é—´\tå‰”é™¤è¿‡æœŸæ—¶é—´")]),s._v(" "),e("p",[s._v("ttl key æŸ¥çœ‹è¿‡æœŸæ—¶é—´è¿˜å‰©å¤šå°‘")]),s._v(" "),e("ol",[e("li",[s._v("æ¯æ¬¡è®¿é—®å¹¶ä¸èƒ½é‡æ–°è®¡ç®—è¿‡æœŸæ—¶é—´")]),s._v(" "),e("li",[s._v("é‡æ–°ä¿®æ”¹å€¼ä¹‹åï¼Œä¼šç›´æ¥å‰”é™¤è¿‡æœŸæ—¶é—´")])]),s._v(" "),e("p",[e("strong",[s._v("rediså¦‚ä½•æ·˜æ±°è¿‡æœŸæ—¶é—´çš„key")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("è¢«åŠ¨çš„è®¿é—®æ—¶åˆ¤å®š")]),s._v(" "),e("p",[s._v("å½“å®¢æˆ·ç«¯å°è¯•è®¿é—®çš„æ—¶å€™ï¼Œkeyä¼šè¢«å‘ç°å¹¶ä¸»åŠ¨å‰”é™¤è¯¥keyï¼ˆè¿‡æœŸçš„keyæœ‰å¯èƒ½ä¸€è¾ˆå­éƒ½ä¸ä¼šè¢«å†æ¬¡è®¿é—®ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼å¹¶ä¸èƒ½ä¿è¯ä¸€å®šä¼šæŠŠè¿‡æœŸçš„keyåˆ é™¤æ‰ï¼‰")])]),s._v(" "),e("li",[e("p",[s._v("é—´æ¥ä¸»åŠ¨æ–¹å¼ï¼šæ¯10ç§’è¦åšçš„äº‹æƒ…")]),s._v(" "),e("ol",[e("li",[s._v("æµ‹è¯•éšæœºçš„20ä¸ªkeysè¿›è¡Œç›¸å…³è¿‡æœŸçš„æ£€æµ‹")]),s._v(" "),e("li",[s._v("åˆ é™¤æ‰€æœ‰å·²ç»è¿‡æœŸçš„key")]),s._v(" "),e("li",[s._v("å¦‚æœæœ‰å¤šä½™25%çš„keysè¿‡æœŸï¼Œé‡å¤æ­¥éª¤1\n"),e("ol",[e("li",[s._v("å¦‚æœæœ‰æ»¡è¶³æ¡ä»¶3ï¼Œåˆ™ç«‹å³å¯¹éšæœºçš„20ä¸ªkeyè¿›è¡Œè¿‡æœŸæ£€æµ‹")]),s._v(" "),e("li",[s._v("å¦‚æœæ²¡æœ‰æ»¡è¶³æ¡ä»¶3ï¼Œåˆ™ä¼šåœ¨å¦ä¸€ä¸ª10ç§’æ‰ä¼šå¯¹éšæœºçš„20keyè¿›è¡Œè¿‡æœŸæ£€æµ‹")])])])]),s._v(" "),e("p",[s._v("è¿™æ˜¯ä¸€ä¸ªå¹³å‡¡çš„æ¦‚ç‡ç®—æ³•ï¼ŒåŸºæœ¬ä¸Šçš„å‡è®¾æ˜¯ï¼Œæˆ‘ä»¬çš„æ ·æœ¬æ˜¯è¿™ä¸ªç§˜é’¥æ§ä»¶ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¸æ–­é‡å¤è¿‡æœŸæ£€æµ‹ï¼Œç›´åˆ°è¿‡æœŸçš„keysç™¾åˆ†ä¹‹ç™¾ä½äº25%ï¼Œè¿™æ„å‘³ç€ï¼Œåœ¨ä»»ä½•ç»™å®šçš„æ—¶åˆ»ï¼Œæœ€å¤šä¼šæ¸…æ¥š25%çš„è¿‡æœŸçš„keysã€‚")]),s._v(" "),e("p",[s._v("ç›®çš„ï¼šç¨å¾®ç‰ºç‰²ä¸‹å†…å­˜ï¼Œä½†æ˜¯ä¿ä½äº†redisæ€§èƒ½ä¸ºç‹ã€‚")])])])]),s._v(" "),e("h2",{attrs:{id:"redisæŒä¹…åŒ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redisæŒä¹…åŒ–"}},[s._v("#")]),s._v(" redisæŒä¹…åŒ–")]),s._v(" "),e("p",[e("strong",[s._v("æŒä¹…åŒ–æ— å¤–ä¹ï¼šé•œåƒ+æ—¥å¿—")])]),s._v(" "),e("h3",{attrs:{id:"rdb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rdb"}},[s._v("#")]),s._v(" RDB")]),s._v(" "),e("blockquote",[e("p",[s._v("ä¹Ÿç§°å¿«ç…§æ–¹å¼ï¼Œé…ç½®æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡å…¨é‡å¤‡ä»½ï¼ŒRediså°†æ•°æ®é›†å¿«ç…§ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œä¿å­˜åœ¨ä¸€ä¸ªåä¸ºdump.rdbçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥"),e("strong",[s._v("æ‰‹åŠ¨è°ƒç”¨SAVEæˆ–BGSAVEå‘½ä»¤")]),s._v("ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("åŸç†")]),s._v("ï¼šä¸»è¿›ç¨‹è°ƒç”¨forkå‡½æ•°ç”Ÿæˆä¸€ä¸ªå­è¿›ç¨‹ï¼ˆforkä¹‹åï¼Œåªæ˜¯å¤åˆ¶æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å¤åˆ¶å†…å­˜ï¼Œæ‰€ä»¥æ—¶é—´ä¼šéå¸¸å¿«ï¼Œå‡ ä¹ä¸ç”¨è€ƒè™‘ã€‚åŒæ—¶ä¸»çº¿ç¨‹å®ç°äº†Copy-on-Writeï¼Œå½“å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ–°çš„åœ°å€ï¼Œæ—§çš„åœ°å€çš„æ•°æ®ä¿æŒä¸å˜ï¼‰ï¼Œå­è¿›ç¨‹è¿›è¡Œç£ç›˜I/Oæ“ä½œï¼Œ"),e("strong",[s._v("æ“ä½œå®Œæˆåæ›¿æ¢æ—§çš„RDBæ–‡ä»¶")]),s._v("ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼šéå¸¸é€‚åˆåšå¤‡ä»½ä¸å›æ»šåˆ°æŒ‡å®šçš„æ—¶é—´ç‚¹ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥æ¯å¤©æ™šä¸Š2ç‚¹æ‰§è¡Œå®šæ—¶è®¡åˆ’å…¨é‡å¤‡ä»½ä¸€æ¬¡Redisä¸­çš„æ•°æ®ï¼Œä»¥åæˆ‘ä»¬è¿›è¡Œæ¢å¤çš„æ—¶å€™å¯ä»¥å°†Redisæ¢å¤åˆ°æŒ‡å®šçš„æ—¶é—´ç‚¹çš„ç‰ˆæœ¬ï¼›ä¸AOFç›¸æ¯”ä½¿ç”¨"),e("strong",[s._v("RDBæ–¹å¼æ€§èƒ½è¾ƒé«˜")]),s._v("ï¼›ä¸AOFç›¸æ¯”Redis"),e("strong",[s._v("é‡å¯çš„é€Ÿåº¦è¾ƒå¿«")]),s._v("ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼šç›¸æ¯”AOFä¸¢å¤±çš„æ•°æ®å¯èƒ½ä¼šæ›´å¤šï¼Œæ¯”å¦‚è®¾ç½®1å°æ—¶å¤‡ä»½ä¸€æ¬¡å¿«ç…§ï¼Œé‚£ä¹ˆæœ€å¤šä¼šæŸå¤±1å°æ—¶çš„æ•°æ®ã€‚")]),s._v(" "),e("p",[s._v("RDBé…ç½®ï¼š")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("save "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("900")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsave "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nsave "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é…ç½®è§£é‡Šï¼šä»ä¸‹å¾€ä¸Šæ‰§è¡Œï¼Œå…ˆæœ€åä¸€ä¸ªé…ç½®ï¼Œ")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. åœ¨ 60 ç§’å†…ï¼Œå¦‚æœæ“ä½œæ¬¡æ•°è¶…è¿‡ 10000 æ¬¡ï¼Œåˆ™ç›´æ¥åå°è°ƒç”¨æ‰§è¡Œå¤‡ä»½ï¼›å¦‚æœæ²¡æœ‰è¶…è¿‡ 10000 æ¬¡ï¼Œåˆ™å‘ä¸Šçœ‹ç¬¬äºŒä¸ªåˆ¤æ–­ï¼Œæ­¤æ—¶è¶…è¿‡äº†10ï¼Œåˆ™ç«‹å³æ‰§è¡Œå¤‡ä»½ï¼›")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. åœ¨ 300 ç§’å†…ï¼Œå¦‚æœæ“ä½œæ¬¡æ•°è¶…è¿‡äº† 10 æ¬¡ï¼Œåˆ™ç›´æ¥åå°è°ƒç”¨æ‰§è¡Œå¤‡ä»½ï¼Œå¦‚æœæ²¡æœ‰è¶…è¿‡ 10 æ¬¡ï¼Œåˆ™å‘ä¸Šçœ‹ç¬¬1ä¸ªåˆ¤æ–­ï¼Œæ­¤æ—¶è¶…è¿‡äº† 1ï¼Œ åˆ™ç«‹å³æ‰§è¡Œå¤‡ä»½ã€‚")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. åœ¨ 900 ç§’è¢«ï¼Œå¦‚æœæ“ä½œæ¬¡æ•°è¶…è¿‡äº† 1 æ¬¡ï¼Œåˆ™ç«‹å³æ‰§è¡Œå¤‡ä»½")]),s._v("\n")])])])]),s._v(" "),e("h3",{attrs:{id:"aofï¼šappend-only-file-æŒä¹…åŒ–ï¼šä¿å­˜å†™çŠ¶æ€"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aofï¼šappend-only-file-æŒä¹…åŒ–ï¼šä¿å­˜å†™çŠ¶æ€"}},[s._v("#")]),s._v(" AOFï¼šAppend-Only-File æŒä¹…åŒ–ï¼šä¿å­˜å†™çŠ¶æ€")]),s._v(" "),e("blockquote",[e("p",[s._v("ä»¥è¿½åŠ çš„æ–¹å¼è®°å½•Redisçš„å†™æ“ä½œï¼Œå¹¶åœ¨Redisé‡å¯æ—¶è¿›è¡Œé‡æ”¾ï¼ˆä¸MySQLçš„binlogæ—¥å¿—çš„åŸç†æ˜¯ä¸€æ ·çš„ï¼‰ã€‚å½“AOFæ—¥å¿—è¿‡å¤§æ—¶ï¼Œredisæ”¯æŒæ—¥å¿—é‡å†™ã€‚ã€è¿™é‡Œæä¾›ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œåœ¨Redisä¸­æ˜¯å…ˆæ‰§è¡Œå‘½ä»¤å†è®°å½•æ—¥å¿—åˆ°AOFï¼Œè¿™ä¹Ÿæ˜¯Redisäº‹åŠ¡ä¸æ”¯æŒå›æ»šçš„åŸå› ï¼šå³ä½¿å‘ç”Ÿå¼‚å¸¸ï¼Œæ²¡æœ‰å¯ä»¥ç”¨æ¥æ‰§è¡Œå›æ»šæ“ä½œçš„æ—¥å¿—ã€‚è€Œä¼ ç»Ÿçš„æ•°æ®åº“ä¾‹å¦‚MySQLéƒ½æ˜¯å…ˆåšæ—¥å¿—ç„¶åå†åšæ“ä½œï¼Œæ‰€ä»¥èƒ½å¤Ÿæ”¯æŒå›æ»šã€‘ã€‚")]),s._v(" "),e("p",[s._v("AOFç›¸å…³é…ç½®ï¼š")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é»˜è®¤å…³é—­ï¼Œè‹¥è¦å¼€å¯å°†noæ”¹ä¸ºyes")]),s._v("\nappendonly no\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# appendæ–‡ä»¶çš„åå­—")]),s._v("\nappendfilename "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# AOFæ–‡ä»¶çš„å†™å…¥æ–¹å¼")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# alwaysä¸€æ—¦ç¼“å­˜åŒºå†…å®¹å‘ç”Ÿå˜åŒ–å°±å†™å…¥AOFæ–‡ä»¶ä¸­")]),s._v("\nappendfsync always\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# everysec æ¯ä¸ªä¸€ç§’å°†ç¼“å­˜åŒºå†…å®¹å†™å…¥æ–‡ä»¶ é»˜è®¤å¼€å¯çš„å†™å…¥æ–¹å¼")]),s._v("\nappendfsync everysec\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°†å†™å…¥æ–‡ä»¶çš„æ“ä½œäº¤ç”±æ“ä½œç³»ç»Ÿå†³å®š")]),s._v("\nappendfsync no\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å½“AOFæ–‡ä»¶å¤§å°çš„å¢é•¿ç‡å¤§äºè¯¥é…ç½®é¡¹æ—¶è‡ªåŠ¨å¼€å¯é‡å†™ï¼ˆè¿™é‡ŒæŒ‡è¶…è¿‡åŸå¤§å°çš„100%ï¼‰ã€‚")]),s._v("\nauto-aof-rewrite-percentage "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å½“AOFæ–‡ä»¶å¤§å°å¤§äºè¯¥é…ç½®é¡¹æ—¶è‡ªåŠ¨å¼€å¯é‡å†™")]),s._v("\nauto-aof-rewrite-min-size 64mb\n")])])]),e("p",[e("strong",[s._v("åŸç†")]),s._v("ï¼šæ“ä½œç³»ç»Ÿå°†å†™æ“ä½œé¦–å…ˆè®°å½•åˆ°å†…å­˜ç¼“å†²åŒºä¸­ï¼Œç„¶åä½¿ç”¨fsyncå‡½æ•°å°†æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼šå¦‚æœä¸è€ƒè™‘æ€§èƒ½ï¼ŒAOFå¯ä»¥æœ€å¤§é™åº¦ä¿è¯æ•°æ®å®Œæ•´æ€§ï¼Œå¯ä»¥è®¾ç½®æ¯å‘ç”Ÿä¸€æ¬¡å†™æ“ä½œå°±è°ƒç”¨ä¸€æ¬¡fsyncå‡½æ•°ï¼›æ›´åŠ çµæ´»ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„fsyncç­–ç•¥ï¼š")]),s._v(" "),e("ol",[e("li",[s._v("alwaysï¼šä¸€æ—¦ç¼“å­˜åŒºå†…å®¹å‘ç”Ÿå˜åŒ–å°±ç«‹å³å†™å…¥AOFæ–‡ä»¶ä¸­ï¼ˆæœ€å¤§é™åº¦ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œæç«¯æƒ…å†µä¸‹åªä¼šä¸¢å¤±ä¸€æ¡æ•°æ®ï¼‰")]),s._v(" "),e("li",[s._v("everysecï¼ˆé»˜è®¤ï¼‰ï¼šæ¯ä¸ªä¸€ç§’å°†ç¼“å­˜åŒºå†…å®¹å†™å…¥æ–‡ä»¶ï¼ˆæœ€å¤šåªä¼šä¸¢å¤±è¿™ä¸€ç§’å†…ä¸”æ¯”ç¼“å­˜åŒºå¤§å°å°1çš„æ•°æ®é‡ï¼‰")]),s._v(" "),e("li",[s._v("noï¼šå°†å†™å…¥æ–‡ä»¶çš„æ“ä½œäº¤ç”±æ“ä½œç³»ç»Ÿå†³å®šï¼Œå½“ç¼“å†²åŒºæ»¡çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘å†™æ“ä½œï¼ˆä¼šä¸¢å¤±ä¸€ä¸ªç¼“å†²åŒºçš„æ•°æ®ï¼‰")])]),s._v(" "),e("p",[e("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼šä¸RDBæ–¹å¼ç›¸æ¯”ï¼Œç›¸åŒæ•°æ®é›†å¤§å°AOFå ç”¨ç©ºé—´æ›´å¤§ï¼›è‹¥è°ƒç”¨fsyncçš„é¢‘ç‡è¿‡å¿«ï¼Œæ€§èƒ½ä¼šå˜å·®ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("éœ€è¦æ³¨æ„çš„æ˜¯")]),s._v("ï¼šAOFæ–‡ä»¶æŸåï¼ŸAOFæ–‡ä»¶ä¸­å¯èƒ½æœ‰ä¸€æ¡å‘½ä»¤æ˜¯ä¸å®Œæ•´çš„ï¼Œæ¯”å¦‚å‘ç”Ÿæ­£åœ¨å†™å…¥çš„æ—¶å€™æ–­ç”µçš„è¿™ç§æƒ…å†µï¼Œredisæ”¯æŒé‡æ”¾è¿™æ ·çš„AOFæ–‡ä»¶ï¼Œä»–ä¼šåœ¨å¯åŠ¨æ—¥å¿—ä¸­è®°å½•é”™è¯¯å‘½ä»¤çš„è¡Œæ•°ï¼Œå¹¶åœ¨é‡æ”¾æ—¶å¯¹è¯¥è¡Œè¿›è¡Œå¿½ç•¥ã€‚")])]),s._v(" "),e("h4",{attrs:{id:"aofé‡å†™ï¼šbgrewriteaof"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aofé‡å†™ï¼šbgrewriteaof"}},[s._v("#")]),s._v(" AOFé‡å†™ï¼šBGREWRITEAOF")]),s._v(" "),e("ul",[e("li",[s._v("AOF æŒä¹…åŒ–æ˜¯é€šè¿‡ä¿å­˜è¢«æ‰§è¡Œçš„å†™å‘½ä»¤æ¥è®°å½•æ•°æ®åº“çŠ¶æ€çš„ï¼Œæ‰€ä»¥AOFæ–‡ä»¶çš„å¤§å°éšç€æ—¶é—´çš„æµé€ä¸€å®šä¼šè¶Šæ¥è¶Šå¤§ï¼›å½±å“åŒ…æ‹¬ä½†ä¸é™äºï¼šå¯¹äºRedisæœåŠ¡å™¨ï¼Œè®¡ç®—æœºçš„å­˜å‚¨å‹åŠ›ï¼›AOFè¿˜åŸå‡ºæ•°æ®åº“çŠ¶æ€çš„æ—¶é—´å¢åŠ ã€‚")]),s._v(" "),e("li",[s._v("ä¸ºäº†è§£å†³AOFæ–‡ä»¶ä½“ç§¯è†¨èƒ€çš„é—®é¢˜ï¼ŒRedisæä¾›äº†AOFé‡å†™åŠŸèƒ½ï¼šRedisæœåŠ¡å™¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„AOFæ–‡ä»¶æ¥æ›¿ä»£ç°æœ‰çš„AOFæ–‡ä»¶ï¼Œæ–°æ—§ä¸¤ä¸ªæ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯æ–°çš„AOFæ–‡ä»¶ä¸ä¼šåŒ…å«ä»»ä½•æµªè´¹ç©ºé—´çš„å†—ä½™å‘½ä»¤ï¼Œé€šå¸¸ä½“ç§¯ä¼šè¾ƒæ—§AOFæ–‡ä»¶å°å¾ˆå¤šã€‚")]),s._v(" "),e("li",[s._v("AOFé‡å†™å¹¶ä¸éœ€è¦å¯¹åŸæœ‰AOFæ–‡ä»¶è¿›è¡Œä»»ä½•çš„è¯»å–ï¼Œå†™å…¥ï¼Œåˆ†æç­‰æ“ä½œï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯é€šè¿‡è¯»å–æœåŠ¡å™¨å½“å‰çš„æ•°æ®åº“çŠ¶æ€æ¥å®ç°çš„ã€‚")])]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("å®ç°åŸç†")])]),s._v(" "),e("ul",[e("li",[s._v("é¦–å…ˆä»æ•°æ®åº“ä¸­è¯»å–é”®ç°åœ¨çš„å€¼ï¼Œç„¶åç”¨ä¸€æ¡å‘½ä»¤å»è®°å½•é”®å€¼å¯¹ï¼Œä»£æ›¿ä¹‹å‰è®°å½•è¯¥é”®å€¼å¯¹çš„å¤šä¸ªå‘½ä»¤;")]),s._v(" "),e("li",[s._v("å®é™…ä¸ºäº†é¿å…æ‰§è¡Œå‘½ä»¤æ—¶é€ æˆå®¢æˆ·ç«¯è¾“å…¥ç¼“å†²åŒºæº¢å‡ºï¼Œé‡å†™ç¨‹åºåœ¨å¤„ç†"),e("code",[s._v("list hash set zset")]),s._v("æ—¶ï¼Œä¼šæ£€æŸ¥é”®æ‰€åŒ…å«çš„å…ƒç´ çš„ä¸ªæ•°ï¼Œå¦‚æœå…ƒç´ çš„æ•°é‡è¶…è¿‡äº†"),e("code",[s._v("redis.h/REDIS_AOF_REWRITE_ITEMS_PER_CMD")]),s._v("å¸¸é‡çš„å€¼ï¼Œé‚£ä¹ˆé‡å†™ç¨‹åºä¼šä½¿ç”¨å¤šæ¡å‘½ä»¤æ¥è®°å½•é”®çš„å€¼ï¼Œè€Œä¸æ˜¯å•ä½¿ç”¨ä¸€æ¡å‘½ä»¤ã€‚è¯¥å¸¸é‡é»˜è®¤å€¼æ˜¯64ï¼Œå³æ¯æ¡å‘½ä»¤è®¾ç½®çš„å…ƒç´ çš„ä¸ªæ•° æ˜¯æœ€å¤š64ä¸ªï¼Œä½¿ç”¨å¤šæ¡å‘½ä»¤é‡å†™å®ç°é›†åˆé”®ä¸­å…ƒç´ æ•°é‡è¶…è¿‡64ä¸ªçš„é”®ï¼›")])])]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("AOFåå°é‡å†™")])]),s._v(" "),e("ul",[e("li",[e("code",[s._v("aof_rewrite")]),s._v("å‡½æ•°å¯ä»¥åˆ›å»ºæ–°çš„AOFæ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°ä¼šè¿›è¡Œå¤§é‡çš„å†™å…¥æ“ä½œï¼Œæ‰€ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„çº¿ç¨‹å°†è¢«é•¿æ—¶é—´çš„é˜»å¡ï¼Œå› ä¸ºRedisæœåŠ¡å™¨ä½¿ç”¨å•çº¿ç¨‹æ¥å¤„ç†å‘½ä»¤è¯·æ±‚ï¼›æ‰€ä»¥å¦‚æœç›´æ¥æ˜¯æœåŠ¡å™¨è¿›ç¨‹è°ƒç”¨"),e("code",[s._v("AOF_REWRITE")]),s._v("å‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆé‡å†™AOFæœŸé—´ï¼ŒæœåŠ¡å™¨å°†æ— æ³•å¤„ç†å®¢æˆ·ç«¯å‘é€æ¥çš„å‘½ä»¤è¯·æ±‚ï¼›")]),s._v(" "),e("li",[s._v("Redisä¸å¸Œæœ›AOFé‡å†™ä¼šé€ æˆæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ï¼Œæ‰€ä»¥Rediså†³å®šå°†AOFé‡å†™ç¨‹åºæ”¾åˆ°å­è¿›ç¨‹ï¼ˆåå°ï¼‰é‡Œæ‰§è¡Œã€‚è¿™æ ·å¤„ç†çš„æœ€å¤§å¥½å¤„æ˜¯ï¼š\n"),e("ul",[e("li",[s._v("å­è¿›ç¨‹è¿›è¡ŒAOFé‡å†™æœŸé—´ï¼Œä¸»è¿›ç¨‹å¯ä»¥ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚")]),s._v(" "),e("li",[s._v("å­è¿›ç¨‹å¸¦æœ‰ä¸»è¿›ç¨‹çš„æ•°æ®å‰¯æœ¬ï¼Œä½¿ç”¨å­è¿›ç¨‹è€Œä¸æ˜¯çº¿ç¨‹ï¼Œå¯ä»¥é¿å…åœ¨é”çš„æƒ…å†µä¸‹ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§")])])])])]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("ä½¿ç”¨å­è¿›ç¨‹è¿›è¡ŒAOFé‡å†™çš„é—®é¢˜")])]),s._v(" "),e("p",[s._v("å­è¿›ç¨‹åœ¨è¿›è¡ŒAOFé‡å†™æœŸé—´ï¼ŒæœåŠ¡å™¨è¿›ç¨‹è¿˜è¦ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ï¼Œè€Œæ–°çš„å‘½ä»¤å¯èƒ½å¯¹ç°æœ‰çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œè¿™ä¼šè®©å½“å‰æ•°æ®åº“çš„æ•°æ®å’Œé‡å†™åçš„AOFæ–‡ä»¶ä¸­çš„æ•°æ®ä¸ä¸€è‡´")])]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("å¦‚ä½•ä¿®æ­£")])]),s._v(" "),e("ul",[e("li",[s._v("ä¸ºäº†è§£å†³è¿™ç§æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼ŒRediså¢åŠ äº†ä¸€ä¸ª"),e("strong",[s._v("AOFé‡å†™ç¼“å­˜")]),s._v("ï¼Œè¿™ä¸ªç¼“å­˜åœ¨forkå‡ºå­è¿›ç¨‹ä¹‹åå¼€å§‹å¯ç”¨ï¼ŒRedisæœåŠ¡å™¨ä¸»è¿›ç¨‹åœ¨æ‰§è¡Œå®Œå†™å‘½ä»¤ä¹‹åï¼Œä¼šåŒæ—¶å°†è¿™ä¸ªå†™å‘½ä»¤è¿½åŠ åˆ°AOFç¼“å†²åŒºå’ŒAOFé‡å†™ç¼“å†²åŒº")]),s._v(" "),e("li",[s._v("å³å­è¿›ç¨‹åœ¨æ‰§è¡ŒAOFé‡å†™æ—¶ï¼Œä¸»è¿›ç¨‹éœ€è¦æ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªå·¥ä½œï¼š\n"),e("ul",[e("li",[s._v("æ‰§è¡Œclientå‘æ¥çš„å‘½ä»¤è¯·æ±‚ï¼›")]),s._v(" "),e("li",[s._v("å°†å†™å‘½ä»¤è¿½åŠ åˆ°ç°æœ‰çš„AOFæ–‡ä»¶ä¸­ï¼›")]),s._v(" "),e("li",[s._v("å°†å†™å‘½ä»¤è¿½åŠ åˆ°AOFé‡å†™ç¼“å­˜ä¸­ã€‚")])])])]),s._v(" "),e("p",[s._v("è¦ä¿è¯çš„æ˜¯ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("AOFç¼“å†²åŒºçš„å†…å®¹ä¼šå®šæœŸè¢«å†™å…¥å’ŒåŒæ­¥åˆ°AOFæ–‡ä»¶ä¸­ï¼Œå¯¹ç°æœ‰çš„AOFæ–‡ä»¶çš„å¤„ç†å·¥ä½œä¼šæ­£å¸¸è¿›è¡Œ")]),s._v(" "),e("li",[s._v("ä»åˆ›å»ºå­è¿›ç¨‹å¼€å§‹ï¼ŒæœåŠ¡å™¨æ‰§è¡Œçš„æ‰€æœ‰å†™æ“ä½œéƒ½ä¼šè¢«è®°å½•åˆ°AOFé‡å†™ç¼“å†²åŒºä¸­ï¼Œèƒ½å¤Ÿä¿è¯å½“å‰æ•°æ®åº“çš„æ•°æ®å’Œé‡å†™åçš„AOFæ–‡ä»¶ä¸­çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚")])]),s._v(" "),e("p",[s._v("å®ŒæˆAOFé‡å†™ä¹‹å")]),s._v(" "),e("p",[s._v("å½“å­è¿›ç¨‹å®Œæˆå¯¹AOFæ–‡ä»¶é‡å†™ä¹‹åï¼Œå®ƒä¼šå‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªå®Œæˆä¿¡å·ï¼Œçˆ¶è¿›ç¨‹æ¥åˆ°è¯¥å®Œæˆä¿¡å·ä¹‹åï¼Œä¼šè°ƒç”¨ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°å®Œæˆä»¥ä¸‹å·¥ä½œ")]),s._v(" "),e("ul",[e("li",[s._v("å°†AOFé‡å†™ç¼“å­˜ä¸­çš„å†…å®¹å…¨éƒ¨å†™å…¥åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­ï¼›è¿™ä¸ªæ—¶å€™æ–°çš„AOFæ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€å’ŒæœåŠ¡å™¨å½“å‰çš„æ•°æ®åº“çŠ¶æ€ä¸€è‡´ï¼›")]),s._v(" "),e("li",[s._v("å¯¹æ–°çš„AOFæ–‡ä»¶è¿›è¡Œæ”¹åï¼ŒåŸå­çš„è¦†ç›–åŸæœ‰çš„AOFæ–‡ä»¶ï¼›å®Œæˆæ–°æ—§ä¸¤ä¸ªAOFæ–‡ä»¶çš„æ›¿æ¢")])]),s._v(" "),e("p",[s._v("å½“è¿™ä¸ªä¿¡å·å¤„ç†å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä¸»è¿›ç¨‹å°±å¯ä»¥ç»§ç»­åƒå¾€å¸¸ä¸€æ ·æ¥æ”¶å‘½ä»¤è¯·æ±‚äº†ã€‚åœ¨æ•´ä¸ªAOFåå°é‡å†™è¿‡ç¨‹ä¸­ï¼Œåªæœ‰æœ€åçš„â€œä¸»è¿›ç¨‹å†™å…¥å‘½ä»¤åˆ°AOFç¼“å­˜â€å’Œâ€œå¯¹æ–°çš„AOFæ–‡ä»¶è¿›è¡Œæ”¹åï¼Œè¦†ç›–åŸæœ‰çš„AOFæ–‡ä»¶ã€‚â€è¿™ä¸¤ä¸ªæ­¥éª¤ï¼ˆä¿¡å·å¤„ç†å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼‰ä¼šé€ æˆä¸»è¿›ç¨‹é˜»å¡ï¼Œåœ¨å…¶ä»–æ—¶å€™ï¼ŒAOFåå°é‡å†™éƒ½ä¸ä¼šå¯¹ä¸»è¿›ç¨‹é€ æˆé˜»å¡ï¼Œè¿™å°†AOFé‡å†™å¯¹æ€§èƒ½é€ æˆçš„å½±å“é™åˆ°æœ€ä½ã€‚")])]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("è§¦å‘AOFåå°é‡å†™çš„æ¡ä»¶")])]),s._v(" "),e("ul",[e("li",[s._v("AOFé‡å†™å¯ä»¥ç”±ç”¨æˆ·é€šè¿‡è°ƒç”¨"),e("code",[s._v("BGREWRITEAOF")]),s._v("æ‰‹åŠ¨è§¦å‘ã€‚")]),s._v(" "),e("li",[s._v("æœåŠ¡å™¨åœ¨AOFåŠŸèƒ½å¼€å¯çš„æƒ…å†µä¸‹ï¼Œä¼šç»´æŒä»¥ä¸‹ä¸‰ä¸ªå˜é‡ï¼š\n"),e("ul",[e("li",[s._v("è®°å½•å½“å‰AOFæ–‡ä»¶å¤§å°çš„å˜é‡"),e("code",[s._v("aof_current_size")]),s._v("ã€‚")]),s._v(" "),e("li",[s._v("è®°å½•æœ€åä¸€æ¬¡AOFé‡å†™ä¹‹åï¼ŒAOFæ–‡ä»¶å¤§å°çš„å˜é‡"),e("code",[s._v("aof_rewrite_base_size")]),s._v("ã€‚")]),s._v(" "),e("li",[s._v("å¢é•¿ç™¾åˆ†æ¯”å˜é‡"),e("code",[s._v("aof_rewrite_perc")]),s._v("ã€‚")])])]),s._v(" "),e("li",[s._v("æ¯æ¬¡å½“"),e("code",[s._v("serverCron")]),s._v("ï¼ˆæœåŠ¡å™¨å‘¨æœŸæ€§æ“ä½œå‡½æ•°ï¼‰å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ä»¥ä¸‹æ¡ä»¶æ˜¯å¦å…¨éƒ¨æ»¡è¶³ï¼Œå¦‚æœå…¨éƒ¨æ»¡è¶³çš„è¯ï¼Œå°±è§¦å‘è‡ªåŠ¨çš„AOFé‡å†™æ“ä½œï¼š\n"),e("ul",[e("li",[s._v("æ²¡æœ‰BGSAVEå‘½ä»¤ï¼ˆRDBæŒä¹…åŒ–ï¼‰/AOFæŒä¹…åŒ–åœ¨æ‰§è¡Œï¼›")]),s._v(" "),e("li",[s._v("æ²¡æœ‰BGREWRITEAOFåœ¨è¿›è¡Œï¼›")]),s._v(" "),e("li",[s._v("å½“å‰AOFæ–‡ä»¶å¤§å°è¦å¤§äº"),e("code",[s._v("server.aof_rewrite_min_size")]),s._v("ï¼ˆé»˜è®¤ä¸º1MBï¼‰ï¼Œæˆ–è€…åœ¨"),e("code",[s._v("redis.conf")]),s._v("é…ç½®äº†"),e("code",[s._v("auto-aof-rewrite-min-size")]),s._v("å¤§å°ï¼›")]),s._v(" "),e("li",[s._v("å½“å‰AOFæ–‡ä»¶å¤§å°å’Œæœ€åä¸€æ¬¡é‡å†™åçš„å¤§å°ä¹‹é—´çš„æ¯”ç‡ç­‰äºæˆ–è€…ç­‰äºæŒ‡å®šçš„å¢é•¿ç™¾åˆ†æ¯”ï¼ˆåœ¨é…ç½®æ–‡ä»¶è®¾ç½®äº†"),e("code",[s._v("auto-aof-rewrite-percentage")]),s._v("å‚æ•°ï¼Œä¸è®¾ç½®é»˜è®¤ä¸º100%ï¼‰")])])])])]),s._v(" "),e("h3",{attrs:{id:"æ··åˆæ–¹å¼ï¼šrdbä¸aofæ··åˆä½¿ç”¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ··åˆæ–¹å¼ï¼šrdbä¸aofæ··åˆä½¿ç”¨"}},[s._v("#")]),s._v(" æ··åˆæ–¹å¼ï¼šRDBä¸AOFæ··åˆä½¿ç”¨")]),s._v(" "),e("blockquote",[e("p",[s._v("å°† RDBæ–‡ä»¶çš„å†…å®¹å’Œå¢é‡çš„ AOF æ—¥å¿—æ–‡ä»¶å­˜åœ¨ä¸€èµ·ã€‚è¿™é‡Œçš„ AOF æ—¥å¿—ä¸å†æ˜¯å…¨é‡çš„æ—¥å¿—ï¼Œè€Œæ˜¯è‡ªæŒä¹…åŒ–å¼€å§‹åˆ°æŒä¹…åŒ–ç»“æŸçš„è¿™æ®µæ—¶é—´å‘ç”Ÿçš„å¢é‡ AOF æ—¥å¿—ã€‚")])]),s._v(" "),e("h3",{attrs:{id:"rediså®˜æ–¹å»ºè®®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rediså®˜æ–¹å»ºè®®"}},[s._v("#")]),s._v(" Rediså®˜æ–¹å»ºè®®")]),s._v(" "),e("blockquote",[e("p",[s._v("ä½¿ç”¨æ··åˆæ–¹å¼è¿›è¡ŒRedisçš„æŒä¹…åŒ–ã€‚å¹¶ä¸”æˆ‘ä»¬éœ€è¦ç¡®ä¿é¿å…åœ¨RDBå¿«ç…§æ“ä½œå·²ç»åœ¨è¿›è¡Œæ—¶è§¦å‘AOFé‡å†™ï¼Œæˆ–è€…åœ¨AOFé‡å†™è¿‡ç¨‹ä¸­å…è®¸BGSAVEï¼Œé˜²æ­¢ä¸¤ä¸ªRedisåå°è¿›ç¨‹åŒæ—¶æ‰§è¡Œç£ç›˜I/Oã€‚")])]),s._v(" "),e("h2",{attrs:{id:"ç¼“å­˜çš„å‡»ç©¿"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜çš„å‡»ç©¿"}},[s._v("#")]),s._v(" ç¼“å­˜çš„å‡»ç©¿")]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("æè¿°")]),s._v("ï¼šç¼“å­˜å‡»ç©¿æ˜¯æŒ‡ç¼“å­˜ä¸­æ²¡æœ‰ä½†æ•°æ®åº“ä¸­æœ‰çš„æ•°æ®ï¼ˆä¸€èˆ¬æ˜¯ç¼“å­˜æ—¶é—´åˆ°æœŸï¼‰ï¼Œè¿™æ—¶ç”±äºå¹¶å‘ç”¨æˆ·ç‰¹åˆ«å¤šï¼ŒåŒæ—¶è¯»ç¼“å­˜æ²¡è¯»åˆ°æ•°æ®ï¼ŒåˆåŒæ—¶å»æ•°æ®åº“å»å–æ•°æ®ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›ç¬é—´å¢å¤§ï¼Œé€ æˆè¿‡å¤§å‹åŠ›ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v("ï¼š")]),s._v(" "),e("ol",[e("li",[s._v("è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸è¿œä¸è¿‡æœŸã€‚")]),s._v(" "),e("li",[s._v("ä»ç¼“å­˜ä¸­å–æ•°æ—¶ï¼Œå¢åŠ é”")])])]),s._v(" "),e("h2",{attrs:{id:"ç¼“å­˜çš„é›ªå´©"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜çš„é›ªå´©"}},[s._v("#")]),s._v(" ç¼“å­˜çš„é›ªå´©")]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("æè¿°")]),s._v("ï¼šç¼“å­˜é›ªå´©æ˜¯æŒ‡ç¼“å­˜ä¸­æ•°æ®å¤§æ‰¹é‡åˆ°è¿‡æœŸæ—¶é—´ï¼Œè€ŒæŸ¥è¯¢æ•°æ®é‡å·¨å¤§ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›è¿‡å¤§ç”šè‡³å®•æœºã€‚å’Œç¼“å­˜å‡»ç©¿ä¸åŒçš„æ˜¯ï¼Œç¼“å­˜å‡»ç©¿æŒ‡å¹¶å‘æŸ¥åŒä¸€æ¡æ•°æ®ï¼Œç¼“å­˜é›ªå´©æ˜¯ä¸åŒæ•°æ®éƒ½è¿‡æœŸäº†ï¼Œå¾ˆå¤šæ•°æ®éƒ½æŸ¥ä¸åˆ°ä»è€ŒæŸ¥æ•°æ®åº“ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v("ï¼š")]),s._v(" "),e("ol",[e("li",[s._v("ç¼“å­˜æ•°æ®çš„è¿‡æœŸæ—¶é—´è®¾ç½®éšæœºï¼Œé˜²æ­¢åŒä¸€æ—¶é—´å¤§é‡æ•°æ®è¿‡æœŸç°è±¡å‘ç”Ÿã€‚")]),s._v(" "),e("li",[s._v("å¦‚æœç¼“å­˜æ•°æ®åº“æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå°†çƒ­ç‚¹æ•°æ®å‡åŒ€åˆ†å¸ƒåœ¨ä¸åŒçš„ç¼“å­˜æ•°æ®åº“ä¸­ã€‚")]),s._v(" "),e("li",[s._v("è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸è¿œä¸è¿‡æœŸã€‚")])])]),s._v(" "),e("h2",{attrs:{id:"ç¼“å­˜çš„ä¸€è‡´æ€§ï¼ˆåŒå†™ï¼‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜çš„ä¸€è‡´æ€§ï¼ˆåŒå†™ï¼‰"}},[s._v("#")]),s._v(" ç¼“å­˜çš„ä¸€è‡´æ€§ï¼ˆåŒå†™ï¼‰")]),s._v(" "),e("blockquote"),s._v(" "),e("h2",{attrs:{id:"redisé›†ç¾¤ã€ä¸»ä»å¤åˆ¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redisé›†ç¾¤ã€ä¸»ä»å¤åˆ¶"}},[s._v("#")]),s._v(" redisé›†ç¾¤ã€ä¸»ä»å¤åˆ¶")]),s._v(" "),e("blockquote",[e("ol",[e("li",[e("p",[s._v("å•ç‚¹æ•…éšœï¼ˆä¸»ä»é›†ç¾¤ï¼šæ¨ªå‘æ‰©å……ï¼‰")])]),s._v(" "),e("li",[e("p",[s._v("æ‰¿æ‹…çš„å‹åŠ›å¤§ï¼ˆè¯»å†™åˆ†ç¦»ï¼šæ¨ªå‘æ‰©å……ï¼‰")])]),s._v(" "),e("li",[e("p",[s._v("å®¹é‡å—é™ï¼ˆï¼šçºµå‘æ‰©å……ï¼ŒæŒ‰ç…§ä¸šåŠ¡çº¿è¿›è¡Œé€»è¾‘æ‹†åˆ†ï¼ŒåŒä¸€ä¸ªä¸šåŠ¡çº¿æ•°æ®è¿˜å¾ˆå¤§ï¼Œå¯ä»¥è¿›è¡Œåˆ†ç‰‡ï¼‰")])])]),s._v(" "),e("p",[e("strong",[s._v("å‘ç”Ÿåœ¨å®¢æˆ·ç«¯çš„è§£å†³æ–¹æ¡ˆ")]),s._v("ï¼šredis serverçš„è¿æ¥æˆæœ¬å¾ˆé«˜ï¼Œå¢åŠ ä¸€å±‚ä»£ç†ï¼š1.åå‘ä»£ç†ï¼Œ2.è´Ÿè½½å‡è¡¡")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("æŒ‰ç…§ä¸šåŠ¡çº¿è¿›è¡Œæ‹†åˆ†ï¼Œå®¢æˆ·ç«¯å†³å®šä»€ä¹ˆæ•°æ®æ”¾åˆ°å“ªä¸ªredisé›†ç¾¤ä¸‹ï¼ˆçºµå‘çš„æ¯ä¸€ä¸ªrediséƒ½æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼šä¸»ä»é›†ç¾¤ï¼Œè¯»å†™åˆ†ç±»çš„ï¼‰")])]),s._v(" "),e("li",[e("p",[s._v("ç®—æ³•æ‹†åˆ†ï¼Œkeyåšhashå–æ¨¡ï¼ˆå¼Šç«¯ï¼šæ¨¡æ•°å€¼å¿…é¡»å›ºå®šï¼Œå½±å“åˆ†å¸ƒå¼ä¸‹çš„æ‰©å±•æ€§ï¼‰")])]),s._v(" "),e("li",[e("p",[s._v("éšæœºæ‹†åˆ†ï¼ˆè‡ªå·±éƒ½ä¸çŸ¥é“æ‰”åˆ°å“ªä¸ªå®ä¾‹ä¸Šäº†ï¼Œæ¯ä¸€ä¸ªå®ä¾‹çš„æ•°æ®éƒ½ä¸æ˜¯å®Œæ•´çš„ã€‚å…¸å‹åº”ç”¨åœºæ™¯ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼‰")])]),s._v(" "),e("li",[e("p",[s._v("ä¸€è‡´æ€§å“ˆå¸Œç¯ï¼ˆæ˜ å°„ï¼‰ç®—æ³•ï¼Œhashç¯ä¸Šæœ‰0-2^32ä¸ªç‚¹ï¼Œå„èŠ‚ç‚¹æ‹¿ç€ä¸€ä¸ªå›ºå®šçš„ç­–ç•¥ä¹‹è¿›è¡Œhashç®—æ³•ï¼Œèƒ½å¤Ÿæ˜ å°„ä¸€ä¸ªå€¼ï¼Œåœ¨hashç¯ä¸Šå°±æ˜¯æ˜¯ä¸€ä¸ªç‚¹ã€‚ç­‰æ•°æ®æ¥äº†çš„æ—¶å€™ï¼Œæ‹¿keyå€¼è¿›è¡Œhashç®—æ³•ï¼Œä¹Ÿèƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªå€¼ï¼Œå¯¹åº”hashç¯ä¸Šçš„ä¸€ä¸ªç‚¹ã€‚")]),s._v(" "),e("p",[s._v("hashç¯çš„ç‰¹ç‚¹ï¼šåªæœ‰èŠ‚ç‚¹æ˜ å°„å‡ºçš„ç‚¹æ‰æ˜¯ç‰©ç†çš„ï¼Œkeyæ˜ å°„çš„ç‚¹éƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œç‰©ç†çš„ç‚¹ç”¨treeMapè¿›è¡Œå°è£…ã€‚åœ¨è¿™ä¸ªç»“æ„ä¸­è™šæ‹Ÿçš„ç‚¹æ€»èƒ½æ‰¾åˆ°ä¸€ä¸ªç¦»ä»–æœ€è¿‘çš„ç‰©ç†çš„ç‚¹ï¼Œç›´æ¥æŠŠæ•°æ®å­˜ä¸Šå»å³å¯ã€‚")]),s._v(" "),e("p",[s._v("æ­¤æ—¶å¦‚æœæ–°å¢äº†ä¸€ä¸ªnodeèŠ‚ç‚¹ï¼Œå¾—åˆ°ä¸€ä¸ªç‰©ç†çš„ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªç‚¹ç¦»keyå€¼è¿‘äº†ï¼Œæ•°æ®å°±æ‹¿ä¸åˆ°äº†ã€‚")]),s._v(" "),e("p",[s._v("ä¼˜ç‚¹ï¼šåŠ èŠ‚ç‚¹ï¼Œå¯ä»¥åˆ†æ‹…å…¶ä»–èŠ‚ç‚¹çš„å‹åŠ›ï¼Œä¸ä¼šé€ æˆå…¨å±€æ´—ç‰Œã€‚")]),s._v(" "),e("p",[s._v("ç¼ºç‚¹ï¼šæ–°å¢èŠ‚ç‚¹ä¼šé€ æˆä¸€å°éƒ¨åˆ†æ•°æ®ä¸èƒ½å‘½ä¸­ï¼ˆä¸¤ç§é—®é¢˜ï¼š1.ä¼šå¯¹æ•°æ®åº“é€ æˆå‡»ç©¿ï¼ŒæŠŠå‹åŠ›å‹å€’äº†æ•°æ®åº“é‡Œï¼›2.æ¯æ¬¡å–ç¦»keyå€¼æœ€è¿‘çš„ä¸¤ä¸ªç‰©ç†èŠ‚ç‚¹ï¼Œå¦‚æœä¸¤ä¸ªéƒ½å–ä¸åˆ°å€¼ï¼Œå†å»æ•°æ®åº“é‡Œå–ï¼‰ã€‚")]),s._v(" "),e("p",[s._v("ä¸€ä¸ªnodeèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡å¤šä¸ªå€¼è¿›è¡Œå¤šæ¬¡æ˜ å°„ï¼Œå¾—åˆ°å¤šä¸ªå€¼ï¼Œå¯ä»¥åœ¨ç¯ä¸Šæ˜ å°„å¤šä¸ªç‰©ç†èŠ‚ç‚¹ï¼Œå¯ä»¥è§£å†³æ•°æ®å€¾æ–œçš„é—®é¢˜ã€‚")]),s._v(" "),e("p",[s._v("æ›´å€¾å‘äºåšä¸ºç¼“å­˜ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ•°æ®åº“ç”¨ã€‚")])])]),s._v(" "),e("p",[e("strong",[s._v("twitter/twemproxy")]),s._v(" å¯ä»¥ä½¿ç”¨ä½œä¸ºä»£ç†ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("predixy")]),s._v(" å¯ä»¥ä½¿ç”¨ä½œä¸ºä»£ç†ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("cluster")]),s._v(" å¯ä»¥ä½¿ç”¨ä½œä¸ºä»£ç†ã€‚")]),s._v(" "),e("p",[s._v("é›†ç¾¤é«˜å¯ç”¨ï¼šACPåŸåˆ™ï¼šå¯ç”¨æ€§ï¼Œä¸€è‡´æ€§ï¼Œåˆ†åŒºå®¹é”™æ€§")])]),s._v(" "),e("h2",{attrs:{id:"rediså¼€å‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rediså¼€å‘"}},[s._v("#")]),s._v(" rediså¼€å‘")])])}),[],!1,null,null,null);a.default=v.exports}}]);