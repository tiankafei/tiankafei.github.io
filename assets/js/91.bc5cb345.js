(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{454:function(a,s,t){"use strict";t.r(s);var e=t(45),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"centos7安装flink"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装flink"}},[a._v("#")]),a._v(" Centos7安装Flink")]),a._v(" "),t("h2",{attrs:{id:"下载flink"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载flink"}},[a._v("#")]),a._v(" 下载Flink")]),a._v(" "),t("p",[a._v("选择对应的版本进行下载，这里选择的是：flink-1.9.2-bin-scala_2.12")]),a._v(" "),t("div",{staticClass:"language-http extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[a._v("# flink全部版本下载地址\n"),t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("https:")]),a._v("//flink.apache.org/downloads.html\n# tga 解压包下载路径\n"),t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("https:")]),a._v("//www.apache.org/dyn/closer.lua/flink/flink-1.9.2/flink-1.9.2-bin-scala_2.12.tgz\n")])])]),t("h2",{attrs:{id:"flink单机版安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink单机版安装"}},[a._v("#")]),a._v(" Flink单机版安装")]),a._v(" "),t("h3",{attrs:{id:"解压到指定路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压到指定路径"}},[a._v("#")]),a._v(" 解压到指定路径")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /opt/bigdata/flink-1.9.2-local\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zvxf flink-1.9.2-bin-scala_2.12.tgz -C /opt/bigdata/flink-1.9.2-local\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/bigdata/flink-1.9.2-local\n")])])]),t("h3",{attrs:{id:"设置环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置环境变量"}},[a._v("#")]),a._v(" 设置环境变量")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/profile\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FLINK_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/bigdata/flink-1.9.2-local/flink-1.9.2\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SPARK_HOME")]),a._v("/bin:"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$FLINK_HOME")]),a._v("/bin\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),t("h3",{attrs:{id:"执行配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行配置"}},[a._v("#")]),a._v(" 执行配置")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$FLINK_HOME")]),a._v("/conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" flink-conf.yaml\n")])])]),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JobManager地址")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jobmanager.rpc.address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" bigdata01\n")])])]),t("h3",{attrs:{id:"单机启动测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单机启动测试"}},[a._v("#")]),a._v(" 单机启动测试")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动Flink")]),a._v("\nstart-cluster.sh\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 访问地址")]),a._v("\nhttp://bigdata01:8081/\n")])])]),t("h2",{attrs:{id:"flink集群环境安装on-master"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink集群环境安装on-master"}},[a._v("#")]),a._v(" Flink集群环境安装on-master")]),a._v(" "),t("h3",{attrs:{id:"解压到指定路径-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压到指定路径-2"}},[a._v("#")]),a._v(" 解压到指定路径")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /opt/bigdata/flink-1.9.2-full\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zvxf flink-1.9.2-bin-scala_2.12.tgz -C /opt/bigdata/flink-1.9.2-full\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/bigdata/flink-1.9.2-full\n")])])]),t("h3",{attrs:{id:"设置环境变量-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置环境变量-2"}},[a._v("#")]),a._v(" 设置环境变量")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/profile\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FLINK_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/bigdata/flink-1.9.2-full/flink-1.9.2\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SPARK_HOME")]),a._v("/bin:"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$FLINK_HOME")]),a._v("/bin\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),t("h3",{attrs:{id:"执行配置-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行配置-2"}},[a._v("#")]),a._v(" 执行配置")]),a._v(" "),t("p",[a._v("cd $FLINK_HOME/conf\nvim flink-conf.yaml")]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JobManager地址")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jobmanager.rpc.address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" bigdata01\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JobManagerRPC通信端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jobmanager.rpc.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6123")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JobManager所能使用的堆内存大小")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jobmanager.heap.size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 1024m\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TaskManager所能使用的堆内存大小")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("taskmanager.heap.size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 1024m\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TaskManager管理的TaskSlot个数，依据当前物理机的核心数来配置，一般预留出一部分核心（25%）给系统及其他进程使用，一个slot对应一个core。如果core支持超线程，那么slot个数*2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("taskmanager.numberOfTaskSlots")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定WebUI的访问端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("rest.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8081")]),a._v("\n")])])]),t("p",[a._v("vim slaves")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("bigdata02\nbigdata03\nbigdata04\n")])])]),t("h3",{attrs:{id:"执行分发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行分发"}},[a._v("#")]),a._v(" 执行分发")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" -r flink-conf.yaml slaves bigdata02:"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" -r flink-conf.yaml slaves bigdata03:"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" -r flink-conf.yaml slaves bigdata04:"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n")])])]),t("h3",{attrs:{id:"执行启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行启动"}},[a._v("#")]),a._v(" 执行启动")]),a._v(" "),t("p",[a._v("cd $FLINK_HOME/bin")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动Flink")]),a._v("\nstart-cluster.sh\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 访问地址")]),a._v("\nhttp://bigdata01:8081/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用这个命令给8888端口发送消息")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("nc")]),a._v(" -lk "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8888")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 命令行执行测试")]),a._v("\nflink run -c cn.tiankafei.bigdata.flink.FlinkWorkCount scala-project-1.0-SNAPSHOT.jar\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过UI可以看到后台的输入日志")]),a._v("\nhttp://bigdata01:8081/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过UI上传jar包执行Flink程序")]),a._v("\n\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);