(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{367:function(a,s,t){"use strict";t.r(s);var e=t(13),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"centos7安装flink"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装flink"}},[a._v("#")]),a._v(" Centos7安装Flink")]),a._v(" "),s("h2",{attrs:{id:"下载flink"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载flink"}},[a._v("#")]),a._v(" 下载Flink")]),a._v(" "),s("p",[a._v("选择对应的版本进行下载，这里选择的是：flink-1.9.2-bin-scala_2.12")]),a._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[a._v("# flink全部版本下载地址\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//flink.apache.org/downloads.html")])]),a._v("\n# tga 解压包下载路径\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//www.apache.org/dyn/closer.lua/flink/flink-1.9.2/flink-1.9.2-bin-scala_2.12.tgz")])]),a._v("\n")])])]),s("h2",{attrs:{id:"flink单机版安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flink单机版安装"}},[a._v("#")]),a._v(" Flink单机版安装")]),a._v(" "),s("h3",{attrs:{id:"解压到指定路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压到指定路径"}},[a._v("#")]),a._v(" 解压到指定路径")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /opt/bigdata/flink-1.9.2-local\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zvxf")]),a._v(" flink-1.9.2-bin-scala_2.12.tgz "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" /opt/bigdata/flink-1.9.2-local\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/bigdata/flink-1.9.2-local\n")])])]),s("h3",{attrs:{id:"设置环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置环境变量"}},[a._v("#")]),a._v(" 设置环境变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/profile\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FLINK_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/bigdata/flink-1.9.2-local/flink-1.9.2\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SPARK_HOME")]),a._v("/bin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$FLINK_HOME")]),a._v("/bin\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),s("h3",{attrs:{id:"执行配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行配置"}},[a._v("#")]),a._v(" 执行配置")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$FLINK_HOME")]),a._v("/conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" flink-conf.yaml\n")])])]),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JobManager地址")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jobmanager.rpc.address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" bigdata01\n")])])]),s("h3",{attrs:{id:"单机启动测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单机启动测试"}},[a._v("#")]),a._v(" 单机启动测试")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动Flink")]),a._v("\nstart-cluster.sh\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 访问地址")]),a._v("\nhttp://bigdata01:8081/\n")])])]),s("h2",{attrs:{id:"flink集群环境安装on-master"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flink集群环境安装on-master"}},[a._v("#")]),a._v(" Flink集群环境安装on-master")]),a._v(" "),s("h3",{attrs:{id:"解压到指定路径-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压到指定路径-2"}},[a._v("#")]),a._v(" 解压到指定路径")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /opt/bigdata/flink-1.9.2-full\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zvxf")]),a._v(" flink-1.9.2-bin-scala_2.12.tgz "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" /opt/bigdata/flink-1.9.2-full\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/bigdata/flink-1.9.2-full\n")])])]),s("h3",{attrs:{id:"设置环境变量-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置环境变量-2"}},[a._v("#")]),a._v(" 设置环境变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/profile\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FLINK_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/bigdata/flink-1.9.2-full/flink-1.9.2\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SPARK_HOME")]),a._v("/bin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$FLINK_HOME")]),a._v("/bin\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),s("h3",{attrs:{id:"执行配置-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行配置-2"}},[a._v("#")]),a._v(" 执行配置")]),a._v(" "),s("p",[a._v("cd $FLINK_HOME/conf\nvim flink-conf.yaml")]),a._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JobManager地址")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jobmanager.rpc.address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" bigdata01\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JobManagerRPC通信端口")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jobmanager.rpc.port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6123")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JobManager所能使用的堆内存大小")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jobmanager.heap.size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 1024m\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TaskManager所能使用的堆内存大小")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("taskmanager.heap.size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 1024m\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TaskManager管理的TaskSlot个数，依据当前物理机的核心数来配置，一般预留出一部分核心（25%）给系统及其他进程使用，一个slot对应一个core。如果core支持超线程，那么slot个数*2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("taskmanager.numberOfTaskSlots")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定WebUI的访问端口")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("rest.port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8081")]),a._v("\n")])])]),s("p",[a._v("vim slaves")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("bigdata02\nbigdata03\nbigdata04\n")])])]),s("h3",{attrs:{id:"执行分发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行分发"}},[a._v("#")]),a._v(" 执行分发")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" flink-conf.yaml slaves bigdata02:"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" flink-conf.yaml slaves bigdata03:"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" flink-conf.yaml slaves bigdata04:"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n")])])]),s("h3",{attrs:{id:"执行启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行启动"}},[a._v("#")]),a._v(" 执行启动")]),a._v(" "),s("p",[a._v("cd $FLINK_HOME/bin")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动Flink")]),a._v("\nstart-cluster.sh\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 访问地址")]),a._v("\nhttp://bigdata01:8081/\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用这个命令给8888端口发送消息")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8888")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 命令行执行测试")]),a._v("\nflink run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" cn.tiankafei.bigdata.flink.FlinkWorkCount scala-project-1.0-SNAPSHOT.jar\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过UI可以看到后台的输入日志")]),a._v("\nhttp://bigdata01:8081/\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过UI上传jar包执行Flink程序")]),a._v("\n\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);