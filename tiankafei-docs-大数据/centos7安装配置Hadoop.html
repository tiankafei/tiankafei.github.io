<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CentOS7安装Hadoop | tiankafei - java相关技术栈</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="自己写的一些东西的记录，包括代码与笔记，jdk最低支持1.8">
    
    <link rel="preload" href="/assets/css/0.styles.992cb7aa.css" as="style"><link rel="preload" href="/assets/js/app.b98ad849.js" as="script"><link rel="preload" href="/assets/js/2.01d54993.js" as="script"><link rel="preload" href="/assets/js/92.f6881b21.js" as="script"><link rel="prefetch" href="/assets/js/10.58f35d33.js"><link rel="prefetch" href="/assets/js/100.84acf76d.js"><link rel="prefetch" href="/assets/js/101.e221b0fe.js"><link rel="prefetch" href="/assets/js/102.36f7f518.js"><link rel="prefetch" href="/assets/js/103.09a81bba.js"><link rel="prefetch" href="/assets/js/104.e17749cc.js"><link rel="prefetch" href="/assets/js/105.7544910c.js"><link rel="prefetch" href="/assets/js/106.245ef0b3.js"><link rel="prefetch" href="/assets/js/107.b0baa158.js"><link rel="prefetch" href="/assets/js/108.bde0b667.js"><link rel="prefetch" href="/assets/js/109.66924ded.js"><link rel="prefetch" href="/assets/js/11.8b67ea4c.js"><link rel="prefetch" href="/assets/js/110.ac42c960.js"><link rel="prefetch" href="/assets/js/111.9e55c36b.js"><link rel="prefetch" href="/assets/js/112.40a75b78.js"><link rel="prefetch" href="/assets/js/113.730f0c75.js"><link rel="prefetch" href="/assets/js/114.cd1c6b8e.js"><link rel="prefetch" href="/assets/js/12.e4797305.js"><link rel="prefetch" href="/assets/js/13.2d85b92c.js"><link rel="prefetch" href="/assets/js/14.2bc1fdb5.js"><link rel="prefetch" href="/assets/js/15.49ea1e69.js"><link rel="prefetch" href="/assets/js/16.9937b620.js"><link rel="prefetch" href="/assets/js/17.fc4b47cc.js"><link rel="prefetch" href="/assets/js/18.e71556ea.js"><link rel="prefetch" href="/assets/js/19.64c8d43a.js"><link rel="prefetch" href="/assets/js/20.94d72ec6.js"><link rel="prefetch" href="/assets/js/21.6e71044d.js"><link rel="prefetch" href="/assets/js/22.4dfd648a.js"><link rel="prefetch" href="/assets/js/23.2735fc15.js"><link rel="prefetch" href="/assets/js/24.96da47ed.js"><link rel="prefetch" href="/assets/js/25.d3a64953.js"><link rel="prefetch" href="/assets/js/26.49ae9931.js"><link rel="prefetch" href="/assets/js/27.ffe2ff7f.js"><link rel="prefetch" href="/assets/js/28.ceee6202.js"><link rel="prefetch" href="/assets/js/29.5b430924.js"><link rel="prefetch" href="/assets/js/3.351222b0.js"><link rel="prefetch" href="/assets/js/30.9c5198e3.js"><link rel="prefetch" href="/assets/js/31.44022a56.js"><link rel="prefetch" href="/assets/js/32.91854b18.js"><link rel="prefetch" href="/assets/js/33.2741799d.js"><link rel="prefetch" href="/assets/js/34.d61e93c3.js"><link rel="prefetch" href="/assets/js/35.d28b7f5d.js"><link rel="prefetch" href="/assets/js/36.b646bfa4.js"><link rel="prefetch" href="/assets/js/37.675752e5.js"><link rel="prefetch" href="/assets/js/38.b25fe369.js"><link rel="prefetch" href="/assets/js/39.4c13b5b3.js"><link rel="prefetch" href="/assets/js/4.09fd2c39.js"><link rel="prefetch" href="/assets/js/40.e43dd47b.js"><link rel="prefetch" href="/assets/js/41.8021272c.js"><link rel="prefetch" href="/assets/js/42.062a57df.js"><link rel="prefetch" href="/assets/js/43.b98eeccd.js"><link rel="prefetch" href="/assets/js/44.07744a1c.js"><link rel="prefetch" href="/assets/js/45.710abf0f.js"><link rel="prefetch" href="/assets/js/46.03d81f06.js"><link rel="prefetch" href="/assets/js/47.71d843a3.js"><link rel="prefetch" href="/assets/js/48.165ad08f.js"><link rel="prefetch" href="/assets/js/49.c3bdf6cb.js"><link rel="prefetch" href="/assets/js/5.b99a1609.js"><link rel="prefetch" href="/assets/js/50.4cdf3914.js"><link rel="prefetch" href="/assets/js/51.23620db1.js"><link rel="prefetch" href="/assets/js/52.61bcfe7b.js"><link rel="prefetch" href="/assets/js/53.7d6c4853.js"><link rel="prefetch" href="/assets/js/54.266352df.js"><link rel="prefetch" href="/assets/js/55.9c7abe31.js"><link rel="prefetch" href="/assets/js/56.cc13690d.js"><link rel="prefetch" href="/assets/js/57.ad23abd1.js"><link rel="prefetch" href="/assets/js/58.b421ad53.js"><link rel="prefetch" href="/assets/js/59.772d89ce.js"><link rel="prefetch" href="/assets/js/6.ffe6f60a.js"><link rel="prefetch" href="/assets/js/60.cac6aca8.js"><link rel="prefetch" href="/assets/js/61.59fc7ed6.js"><link rel="prefetch" href="/assets/js/62.46487051.js"><link rel="prefetch" href="/assets/js/63.0571f56e.js"><link rel="prefetch" href="/assets/js/64.72dabea2.js"><link rel="prefetch" href="/assets/js/65.41225f22.js"><link rel="prefetch" href="/assets/js/66.4e19dd3e.js"><link rel="prefetch" href="/assets/js/67.2f155615.js"><link rel="prefetch" href="/assets/js/68.96903420.js"><link rel="prefetch" href="/assets/js/69.be7e8a2e.js"><link rel="prefetch" href="/assets/js/7.7600938e.js"><link rel="prefetch" href="/assets/js/70.9015f675.js"><link rel="prefetch" href="/assets/js/71.98690377.js"><link rel="prefetch" href="/assets/js/72.121d7122.js"><link rel="prefetch" href="/assets/js/73.4d3a3fac.js"><link rel="prefetch" href="/assets/js/74.011b1551.js"><link rel="prefetch" href="/assets/js/75.c567ff6d.js"><link rel="prefetch" href="/assets/js/76.6334001e.js"><link rel="prefetch" href="/assets/js/77.67ac655a.js"><link rel="prefetch" href="/assets/js/78.281d465d.js"><link rel="prefetch" href="/assets/js/79.c178a2b9.js"><link rel="prefetch" href="/assets/js/8.c1a7f057.js"><link rel="prefetch" href="/assets/js/80.bd7ebfcf.js"><link rel="prefetch" href="/assets/js/81.c34a169b.js"><link rel="prefetch" href="/assets/js/82.3f41273f.js"><link rel="prefetch" href="/assets/js/83.b01cd471.js"><link rel="prefetch" href="/assets/js/84.7cd30602.js"><link rel="prefetch" href="/assets/js/85.0e12ef40.js"><link rel="prefetch" href="/assets/js/86.8d04b4e9.js"><link rel="prefetch" href="/assets/js/87.5a7c4bcd.js"><link rel="prefetch" href="/assets/js/88.73e54d2e.js"><link rel="prefetch" href="/assets/js/89.f514d46f.js"><link rel="prefetch" href="/assets/js/9.af38beaa.js"><link rel="prefetch" href="/assets/js/90.ec244ad8.js"><link rel="prefetch" href="/assets/js/91.1cc77556.js"><link rel="prefetch" href="/assets/js/93.3ff97c94.js"><link rel="prefetch" href="/assets/js/94.cfade6b9.js"><link rel="prefetch" href="/assets/js/95.84213e8e.js"><link rel="prefetch" href="/assets/js/96.df85149f.js"><link rel="prefetch" href="/assets/js/97.bb0c49a5.js"><link rel="prefetch" href="/assets/js/98.e24468d8.js"><link rel="prefetch" href="/assets/js/99.291b658f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.992cb7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">tiankafei - java相关技术栈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/tiankafei-docs-java/Java基础.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/tiankafei-docs-spring/spring学习笔记/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/tiankafei-docs-架构/MySQL调优/" class="nav-link">
  架构
</a></div><div class="nav-item"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop/" class="nav-link">
  大数据
</a></div><div class="nav-item"><a href="/tiankafei-docs-linux/centos常用命令/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/tiankafei-docs-云/Centos7安装Docker并配置使用/" class="nav-link">
  云
</a></div><div class="nav-item"><a href="/tiankafei-docs-other/git命令/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="/tiankafei-docs-en/词性语法学习/" class="nav-link">
  英语
</a></div><div class="nav-item"><a href="https://github.com/tiankafei/tiankafei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/tiankafei-docs-java/Java基础.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/tiankafei-docs-spring/spring学习笔记/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/tiankafei-docs-架构/MySQL调优/" class="nav-link">
  架构
</a></div><div class="nav-item"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop/" class="nav-link">
  大数据
</a></div><div class="nav-item"><a href="/tiankafei-docs-linux/centos常用命令/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/tiankafei-docs-云/Centos7安装Docker并配置使用/" class="nav-link">
  云
</a></div><div class="nav-item"><a href="/tiankafei-docs-other/git命令/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="/tiankafei-docs-en/词性语法学习/" class="nav-link">
  英语
</a></div><div class="nav-item"><a href="https://github.com/tiankafei/tiankafei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>大数据</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html" class="active sidebar-link">CentOS7安装Hadoop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#设置免密登录" class="sidebar-link">设置免密登录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#秘钥拷贝" class="sidebar-link">秘钥拷贝</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#增加认证" class="sidebar-link">增加认证</a></li></ul></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#安装jdk" class="sidebar-link">安装jdk</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#bigdata01上传jdk安装包" class="sidebar-link">bigdata01上传jdk安装包</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#执行安装bigdata01-bigdata04" class="sidebar-link">执行安装bigdata01-bigdata04</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#设置环境变量" class="sidebar-link">设置环境变量</a></li></ul></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#单机部署" class="sidebar-link">单机部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#单机部署存在的角色" class="sidebar-link">单机部署存在的角色</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#部署策略" class="sidebar-link">部署策略</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#环境安装" class="sidebar-link">环境安装</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#执行配置" class="sidebar-link">执行配置</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#启动" class="sidebar-link">启动</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#停止" class="sidebar-link">停止</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#访问地址" class="sidebar-link">访问地址</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#遇到的问题" class="sidebar-link">遇到的问题</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#简单命令使用" class="sidebar-link">简单命令使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#完全分布式部署" class="sidebar-link">完全分布式部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#部署策略-2" class="sidebar-link">部署策略</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#环境安装-2" class="sidebar-link">环境安装</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#执行配置-2" class="sidebar-link">执行配置</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#配置分发" class="sidebar-link">配置分发</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#初始化-2" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#启动-2" class="sidebar-link">启动</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#停止-2" class="sidebar-link">停止</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#访问地址-2" class="sidebar-link">访问地址</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#简单命令使用-2" class="sidebar-link">简单命令使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#高可用-ha-配置" class="sidebar-link">高可用 HA 配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#部署策略-3" class="sidebar-link">部署策略</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#环境安装-3" class="sidebar-link">环境安装</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#zookeeper配置" class="sidebar-link">Zookeeper配置</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#启动zookeeper" class="sidebar-link">启动Zookeeper</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#执行配置-4" class="sidebar-link">执行配置</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#配置分发-2" class="sidebar-link">配置分发</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#第一次启动顺序" class="sidebar-link">第一次启动顺序</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#再次启动时的启动顺序" class="sidebar-link">再次启动时的启动顺序</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#停止ha" class="sidebar-link">停止HA</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#访问地址-3" class="sidebar-link">访问地址</a></li></ul></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#yarn安装" class="sidebar-link">Yarn安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#部署策略-4" class="sidebar-link">部署策略</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#修改配置" class="sidebar-link">修改配置</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#配置分发-3" class="sidebar-link">配置分发</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#启动resourcemanager" class="sidebar-link">启动resourcemanager</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#启动yarn" class="sidebar-link">启动yarn</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#访问地址-4" class="sidebar-link">访问地址</a></li></ul></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#高可用集群停止服务" class="sidebar-link">高可用集群停止服务</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#高可用集群再次启动" class="sidebar-link">高可用集群再次启动</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#hive安装配置" class="sidebar-link">Hive安装配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#单机部署-2" class="sidebar-link">单机部署</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#服务元数据分离配置" class="sidebar-link">服务元数据分离配置</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#解决root用户不能登录的问题-其他用户登录需要配置各种权限" class="sidebar-link">解决root用户不能登录的问题，其他用户登录需要配置各种权限</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#独立hiveserver2模式" class="sidebar-link">独立hiveserver2模式</a></li><li class="sidebar-sub-header"><a href="/tiankafei-docs-大数据/centos7安装配置Hadoop.html#共享metastore-server的hiveserver2模式搭建" class="sidebar-link">共享metastore server的hiveserver2模式搭建</a></li></ul></li></ul></li><li><a href="/tiankafei-docs-大数据/hadoop学习笔记.html" class="sidebar-link">大数据启蒙</a></li><li><a href="/tiankafei-docs-大数据/Hadoop程序运行的三种方式.html" class="sidebar-link">Hadoop程序运行的三种方式</a></li><li><a href="/tiankafei-docs-大数据/hive学习笔记.html" class="sidebar-link">Hive学习笔记</a></li><li><a href="/tiankafei-docs-大数据/centos7安装配置HBase.html" class="sidebar-link">centos7安装配置HBase</a></li><li><a href="/tiankafei-docs-大数据/hbase学习笔记.html" class="sidebar-link">HBase学习笔记</a></li><li><a href="/tiankafei-docs-大数据/大数据项目-日志收集分析.html" class="sidebar-link">大数据项目-日志收集分析</a></li><li><a href="/tiankafei-docs-大数据/flume学习笔记.html" class="sidebar-link">Flume</a></li><li><a href="/tiankafei-docs-大数据/sqoop学习笔记.html" class="sidebar-link">sqoop的简单概论</a></li><li><a href="/tiankafei-docs-大数据/centos7安装配置Spark.html" class="sidebar-link">Centos7安装Scala</a></li><li><a href="/tiankafei-docs-大数据/scala学习笔记.html" class="sidebar-link">Scala学习</a></li><li><a href="/tiankafei-docs-大数据/centos7安装配置Flink.html" class="sidebar-link">Centos7安装Flink</a></li><li><a href="/tiankafei-docs-大数据/Kafka学习笔记.html" class="sidebar-link">Kafka</a></li><li><a href="/tiankafei-docs-大数据/距离度量.html" class="sidebar-link">欧式距离</a></li><li><a href="/tiankafei-docs-大数据/导数.html" class="sidebar-link">/tiankafei-docs-大数据/导数.html</a></li><li><a href="/tiankafei-docs-大数据/概率.html" class="sidebar-link">/tiankafei-docs-大数据/概率.html</a></li><li><a href="/tiankafei-docs-大数据/逻辑.html" class="sidebar-link">/tiankafei-docs-大数据/逻辑.html</a></li><li><a href="/tiankafei-docs-大数据/线性代数.html" class="sidebar-link">/tiankafei-docs-大数据/线性代数.html</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="centos7安装hadoop"><a href="#centos7安装hadoop" class="header-anchor">#</a> CentOS7安装Hadoop</h1> <h2 id="设置免密登录"><a href="#设置免密登录" class="header-anchor">#</a> 设置免密登录</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">ssh</span> localhost
ssh-keygen -t dsa -P <span class="token string">''</span> -f ~/.ssh/id_dsa
<span class="token function">cat</span> ~/.ssh/id_dsa.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
</code></pre></div><h3 id="秘钥拷贝"><a href="#秘钥拷贝" class="header-anchor">#</a> 秘钥拷贝</h3> <h4 id="bigdata01"><a href="#bigdata01" class="header-anchor">#</a> bigdata01</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata02:~/.ssh/bigdata01.pub
<span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata03:~/.ssh/bigdata01.pub
<span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata04:~/.ssh/bigdata01.pub
</code></pre></div><h4 id="bigdata02"><a href="#bigdata02" class="header-anchor">#</a> bigdata02</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata01:~/.ssh/bigdata02.pub
<span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata03:~/.ssh/bigdata02.pub
<span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata04:~/.ssh/bigdata02.pub
</code></pre></div><h4 id="bigdata03"><a href="#bigdata03" class="header-anchor">#</a> bigdata03</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata01:~/.ssh/bigdata03.pub
<span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata02:~/.ssh/bigdata03.pub
<span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata04:~/.ssh/bigdata03.pub
</code></pre></div><h4 id="bigdata04"><a href="#bigdata04" class="header-anchor">#</a> bigdata04</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata01:~/.ssh/bigdata04.pub
<span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata02:~/.ssh/bigdata04.pub
<span class="token function">scp</span> ~/.ssh/id_dsa.pub bigdata03:~/.ssh/bigdata04.pub
</code></pre></div><h3 id="增加认证"><a href="#增加认证" class="header-anchor">#</a> 增加认证</h3> <h4 id="bigdata01-2"><a href="#bigdata01-2" class="header-anchor">#</a> bigdata01</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> ~/.ssh/bigdata02.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">cat</span> ~/.ssh/bigdata03.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">cat</span> ~/.ssh/bigdata04.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
</code></pre></div><h4 id="bigdata02-2"><a href="#bigdata02-2" class="header-anchor">#</a> bigdata02</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> ~/.ssh/bigdata01.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">cat</span> ~/.ssh/bigdata03.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">cat</span> ~/.ssh/bigdata04.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
</code></pre></div><h4 id="bigdata03-2"><a href="#bigdata03-2" class="header-anchor">#</a> bigdata03</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> ~/.ssh/bigdata01.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">cat</span> ~/.ssh/bigdata02.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">cat</span> ~/.ssh/bigdata04.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
</code></pre></div><h4 id="bigdata04-2"><a href="#bigdata04-2" class="header-anchor">#</a> bigdata04</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> ~/.ssh/bigdata01.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">cat</span> ~/.ssh/bigdata02.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">cat</span> ~/.ssh/bigdata03.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
</code></pre></div><h2 id="安装jdk"><a href="#安装jdk" class="header-anchor">#</a> 安装jdk</h2> <h3 id="bigdata01上传jdk安装包"><a href="#bigdata01上传jdk安装包" class="header-anchor">#</a> bigdata01上传jdk安装包</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> ~/jdk-8u231-linux-x64.rpm bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> ~/jdk-8u231-linux-x64.rpm bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> ~/jdk-8u231-linux-x64.rpm bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
</code></pre></div><h3 id="执行安装bigdata01-bigdata04"><a href="#执行安装bigdata01-bigdata04" class="header-anchor">#</a> 执行安装bigdata01-bigdata04</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">rpm</span> -i jdk-8u231-linux-x64.rpm
</code></pre></div><h3 id="设置环境变量"><a href="#设置环境变量" class="header-anchor">#</a> 设置环境变量</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /etc/profile
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/default
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">${JAVA_HOME}</span>/jre 
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">${JAVA_HOME}</span>/lib:<span class="token variable">${JRE_HOME}</span>/lib 
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">${JAVA_HOME}</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre></div><h2 id="单机部署"><a href="#单机部署" class="header-anchor">#</a> 单机部署</h2> <h3 id="单机部署存在的角色"><a href="#单机部署存在的角色" class="header-anchor">#</a> 单机部署存在的角色</h3> <blockquote><p>NameNode</p> <blockquote><p>管理节点</p></blockquote> <p>SecondaryNameNode</p> <blockquote><p>帮助namenode备份数据 但是接替不了namenode的工作</p></blockquote> <p>DataNode</p> <blockquote><p>数据节点</p></blockquote></blockquote> <h3 id="部署策略"><a href="#部署策略" class="header-anchor">#</a> 部署策略</h3> <table><thead><tr><th></th> <th>NameNode</th> <th>SecondaryNameNode</th> <th>DataNode</th></tr></thead> <tbody><tr><td>bigdata01</td> <td>是</td> <td>是</td> <td>是</td></tr> <tr><td>bigdata02</td> <td></td> <td></td> <td></td></tr> <tr><td>bigdata03</td> <td></td> <td></td> <td></td></tr> <tr><td>bigdata04</td> <td></td> <td></td> <td></td></tr></tbody></table> <h3 id="环境安装"><a href="#环境安装" class="header-anchor">#</a> 环境安装</h3> <h4 id="bigdata01上传安装包"><a href="#bigdata01上传安装包" class="header-anchor">#</a> bigdata01上传安装包</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span>
<span class="token function">scp</span> ~/hadoop-2.8.3.tar.gz bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> ~/hadoop-2.8.3.tar.gz bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> ~/hadoop-2.8.3.tar.gz bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h4 id="解压到指定目录"><a href="#解压到指定目录" class="header-anchor">#</a> 解压到指定目录</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> -p /opt/bigdata/hadoop-2.8.3-local
<span class="token function">tar</span> -zxvf /root/hadoop-2.8.3.tar.gz -C /opt/bigdata/hadoop-2.8.3-local
<span class="token builtin class-name">cd</span> /opt/bigdata/hadoop-2.8.3-local
</code></pre></div><h4 id="设置环境变量-2"><a href="#设置环境变量-2" class="header-anchor">#</a> 设置环境变量</h4> <blockquote><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /etc/profile
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/default
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/jre
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib:<span class="token variable">$JRE_HOME</span>/lib
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/opt/bigdata/hadoop-2.8.3-local/hadoop-2.8.3
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre></div></blockquote> <h3 id="执行配置"><a href="#执行配置" class="header-anchor">#</a> 执行配置</h3> <blockquote><p>vi hadoop-env.sh</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/default
</code></pre></div></blockquote> <blockquote><p>vi core-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://bigdata01:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote> <blockquote><p>vi hdfs-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token comment">&lt;!-- 副本数量为1 --&gt;</span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
   	<span class="token comment">&lt;!-- NameNode的路径--&gt;</span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.name.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/local/dfs/name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
   	<span class="token comment">&lt;!-- DataNode的路径--&gt;</span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.datanode.data.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/local/dfs/data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
   	<span class="token comment">&lt;!-- SecondaryNameNode在哪个端口启动--&gt;</span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.secondary.http-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata01:50090<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
   	<span class="token comment">&lt;!-- SecondaryNameNode的路径--&gt;</span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.checkpoint.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/local/dfs/secondary<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote> <blockquote><p>vi slaves</p> <div class="language-shell extra-class"><pre class="language-shell"><code>bigdata01
</code></pre></div></blockquote> <h3 id="初始化"><a href="#初始化" class="header-anchor">#</a> 初始化</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>hdfs namenode -format
</code></pre></div><h3 id="启动"><a href="#启动" class="header-anchor">#</a> 启动</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>start-dfs.sh
</code></pre></div><h3 id="停止"><a href="#停止" class="header-anchor">#</a> 停止</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>stop-dfs.sh
</code></pre></div><h3 id="访问地址"><a href="#访问地址" class="header-anchor">#</a> 访问地址</h3> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header-name keyword">http:</span>//bigdata01:50070/
</code></pre></div><h3 id="遇到的问题"><a href="#遇到的问题" class="header-anchor">#</a> 遇到的问题</h3> <blockquote><p>WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</p> <p>解决方案：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> http://dl.bintray.com/sequenceiq/sequenceiq-bin/hadoop-native-64-2.7.0.tar
<span class="token function">tar</span> -xvf hadoop-native-64-2.7.0.tar -C /opt/bigdata/hadoop-2.8.3-ha/hadoop-2.8.3/lib/native
<span class="token function">tar</span> -xvf hadoop-native-64-2.7.0.tar -C /opt/bigdata/hadoop-2.8.3-ha/hadoop-2.8.3/lib
<span class="token comment"># 环境变量</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_COMMON_LIB_NATIVE_DIR</span><span class="token operator">=</span><span class="token variable">$HADOOP_HOME</span>/lib/native
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Djava.library.path=<span class="token variable">$HADOOP_HOME</span>/lib&quot;</span>
</code></pre></div></blockquote> <h3 id="简单命令使用"><a href="#简单命令使用" class="header-anchor">#</a> 简单命令使用</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 创建目录</span>
hdfs dfs -mkdir /bigdata
<span class="token comment"># 查看根目录</span>
hdfs dfs -ls /
</code></pre></div><h2 id="完全分布式部署"><a href="#完全分布式部署" class="header-anchor">#</a> 完全分布式部署</h2> <h3 id="部署策略-2"><a href="#部署策略-2" class="header-anchor">#</a> 部署策略</h3> <table><thead><tr><th></th> <th>NameNode</th> <th>SecondaryNameNode</th> <th>DataNode</th></tr></thead> <tbody><tr><td>bigdata01</td> <td>是</td> <td></td> <td></td></tr> <tr><td>bigdata02</td> <td></td> <td>是</td> <td>是</td></tr> <tr><td>bigdata03</td> <td></td> <td></td> <td>是</td></tr> <tr><td>bigdata04</td> <td></td> <td></td> <td>是</td></tr></tbody></table> <h3 id="环境安装-2"><a href="#环境安装-2" class="header-anchor">#</a> 环境安装</h3> <h4 id="解压到指定目录-2"><a href="#解压到指定目录-2" class="header-anchor">#</a> 解压到指定目录</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> -p /opt/bigdata/hadoop-2.8.3-full
<span class="token function">tar</span> -zxvf /root/hadoop-2.8.3.tar.gz -C /opt/bigdata/hadoop-2.8.3-full
<span class="token builtin class-name">cd</span> /opt/bigdata/hadoop-2.8.3-full
</code></pre></div><h4 id="设置环境变量-3"><a href="#设置环境变量-3" class="header-anchor">#</a> 设置环境变量</h4> <blockquote><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /etc/profile
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/default
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/jre
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib:<span class="token variable">$JRE_HOME</span>/lib
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/opt/bigdata/hadoop-2.8.3-full/hadoop-2.8.3
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre></div></blockquote> <h3 id="执行配置-2"><a href="#执行配置-2" class="header-anchor">#</a> 执行配置</h3> <blockquote><p>cd $HADOOP_HOME/etc/hadoop</p> <p>vi hadoop-env.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/default
</code></pre></div><p>vi core-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://bigdata01:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>vi hdfs-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token comment">&lt;!-- 副本数量为2 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- NameNode的路径--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.name.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/full/dfs/name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- DataNode的路径--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.datanode.data.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/full/dfs/data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- SecondaryNameNode在哪个端口启动--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.secondary.http-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata02:50090<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- SecondaryNameNode的路径--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.checkpoint.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/full/dfs/secondary<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>vi slaves</p> <div class="language-shell extra-class"><pre class="language-shell"><code>bigdata02
bigdata03
bigdata04
</code></pre></div></blockquote> <h3 id="配置分发"><a href="#配置分发" class="header-anchor">#</a> 配置分发</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> <span class="token variable">$HADOOP_HOME</span>/etc/hadoop
<span class="token function">scp</span> -r hadoop-env.sh core-site.xml hdfs-site.xml slaves bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r hadoop-env.sh core-site.xml hdfs-site.xml slaves bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r hadoop-env.sh core-site.xml hdfs-site.xml slaves bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h3 id="初始化-2"><a href="#初始化-2" class="header-anchor">#</a> 初始化</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>hdfs namenode -format
</code></pre></div><h3 id="启动-2"><a href="#启动-2" class="header-anchor">#</a> 启动</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>start-dfs.sh
</code></pre></div><h3 id="停止-2"><a href="#停止-2" class="header-anchor">#</a> 停止</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>stop-dfs.sh
</code></pre></div><h3 id="访问地址-2"><a href="#访问地址-2" class="header-anchor">#</a> 访问地址</h3> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header-name keyword">http:</span>//bigdata01:50070/
</code></pre></div><h3 id="简单命令使用-2"><a href="#简单命令使用-2" class="header-anchor">#</a> 简单命令使用</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 创建目录</span>
hdfs dfs -mkdir /bigdata
<span class="token comment"># 查看根目录</span>
hdfs dfs -ls /
</code></pre></div><h2 id="高可用-ha-配置"><a href="#高可用-ha-配置" class="header-anchor">#</a> 高可用 HA 配置</h2> <p><img src="/images/HDFS-HA%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.jpg" alt="HDFS-HA解决方案"></p> <h3 id="部署策略-3"><a href="#部署策略-3" class="header-anchor">#</a> 部署策略</h3> <table><thead><tr><th></th> <th>NameNode</th> <th>ZKFC</th> <th>JournalNode</th> <th>Zookeeper</th> <th>DataNode</th></tr></thead> <tbody><tr><td>bigdata01</td> <td>是</td> <td>是</td> <td>是</td> <td>是</td> <td></td></tr> <tr><td>bigdata02</td> <td>是</td> <td>是</td> <td>是</td> <td>是</td> <td>是</td></tr> <tr><td>bigdata03</td> <td></td> <td></td> <td>是</td> <td>是</td> <td>是</td></tr> <tr><td>bigdata04</td> <td></td> <td></td> <td></td> <td>是</td> <td>是</td></tr></tbody></table> <h3 id="环境安装-3"><a href="#环境安装-3" class="header-anchor">#</a> 环境安装</h3> <h4 id="安装包分发"><a href="#安装包分发" class="header-anchor">#</a> 安装包分发</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span>
<span class="token function">scp</span> -r ~/hadoop-2.8.3.tar.gz bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r ~/hadoop-2.8.3.tar.gz bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r ~/hadoop-2.8.3.tar.gz bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

<span class="token function">scp</span> -r ~/zookeeper-3.4.9.tar.gz bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r ~/zookeeper-3.4.9.tar.gz bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r ~/zookeeper-3.4.9.tar.gz bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h4 id="hadoop解压到指定目录"><a href="#hadoop解压到指定目录" class="header-anchor">#</a> hadoop解压到指定目录</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> -p /opt/bigdata/hadoop-2.8.3-ha
<span class="token function">tar</span> -zxvf /root/hadoop-2.8.3.tar.gz -C /opt/bigdata/hadoop-2.8.3-ha
<span class="token builtin class-name">cd</span> /opt/bigdata/hadoop-2.8.3-ha
</code></pre></div><h4 id="zookeeper解压到指定目录"><a href="#zookeeper解压到指定目录" class="header-anchor">#</a> Zookeeper解压到指定目录</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">tar</span> -zxvf /root/zookeeper-3.4.9.tar.gz -C /opt/bigdata
</code></pre></div><h4 id="设置环境变量-4"><a href="#设置环境变量-4" class="header-anchor">#</a> 设置环境变量</h4> <blockquote><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /etc/profile
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/default
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/jre
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib:<span class="token variable">$JRE_HOME</span>/lib
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/opt/bigdata/hadoop-2.8.3-ha/hadoop-2.8.3
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ZOOKEEPER_HOME</span><span class="token operator">=</span>/opt/bigdata/zookeeper-3.4.9
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin:<span class="token variable">$ZOOKEEPER_HOME</span>/bin
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre></div></blockquote> <h4 id="设置完环境变量之后需要重启"><a href="#设置完环境变量之后需要重启" class="header-anchor">#</a> 设置完环境变量之后需要重启</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">reboot</span>
</code></pre></div><h3 id="zookeeper配置"><a href="#zookeeper配置" class="header-anchor">#</a> Zookeeper配置</h3> <h4 id="执行配置-3"><a href="#执行配置-3" class="header-anchor">#</a> 执行配置</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /opt/bigdata/zookeeper-3.4.9/conf
<span class="token function">cp</span> zoo_sample.cfg zoo.cfg
<span class="token function">vi</span> zoo.cfg
</code></pre></div><blockquote><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">dataDir</span><span class="token operator">=</span>/var/bigdata/hadoop/zk
server.1<span class="token operator">=</span>bigdata01:2888:3888
server.2<span class="token operator">=</span>bigdata02:2888:3888
server.3<span class="token operator">=</span>bigdata03:2888:3888
server.4<span class="token operator">=</span>bigdata04:2888:3888
</code></pre></div></blockquote> <h4 id="分发配置后的zookeeper"><a href="#分发配置后的zookeeper" class="header-anchor">#</a> 分发配置后的zookeeper</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> -r zoo.cfg bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r zoo.cfg bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r zoo.cfg bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h4 id="配置myid"><a href="#配置myid" class="header-anchor">#</a> 配置myid</h4> <h5 id="bigdata01-3"><a href="#bigdata01-3" class="header-anchor">#</a> bigdata01</h5> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> /var/bigdata/hadoop/zk
<span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">&gt;</span> /var/bigdata/hadoop/zk/myid
<span class="token function">cat</span> /var/bigdata/hadoop/zk/myid

</code></pre></div><h5 id="bigdata02-3"><a href="#bigdata02-3" class="header-anchor">#</a> bigdata02</h5> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> /var/bigdata/hadoop/zk
<span class="token builtin class-name">echo</span> <span class="token number">2</span> <span class="token operator">&gt;</span> /var/bigdata/hadoop/zk/myid
<span class="token function">cat</span> /var/bigdata/hadoop/zk/myid

</code></pre></div><h5 id="bigdata03-3"><a href="#bigdata03-3" class="header-anchor">#</a> bigdata03</h5> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> /var/bigdata/hadoop/zk
<span class="token builtin class-name">echo</span> <span class="token number">3</span> <span class="token operator">&gt;</span> /var/bigdata/hadoop/zk/myid
<span class="token function">cat</span> /var/bigdata/hadoop/zk/myid

</code></pre></div><h5 id="bigdata04-3"><a href="#bigdata04-3" class="header-anchor">#</a> bigdata04</h5> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> /var/bigdata/hadoop/zk
<span class="token builtin class-name">echo</span> <span class="token number">4</span> <span class="token operator">&gt;</span> /var/bigdata/hadoop/zk/myid
<span class="token function">cat</span> /var/bigdata/hadoop/zk/myid

</code></pre></div><h3 id="启动zookeeper"><a href="#启动zookeeper" class="header-anchor">#</a> 启动Zookeeper</h3> <blockquote><p>bigdata01-bigdata04</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zkServer.sh start
zkServer.sh status
zkServer.sh stop
</code></pre></div></blockquote> <h3 id="执行配置-4"><a href="#执行配置-4" class="header-anchor">#</a> 执行配置</h3> <blockquote><p>cd $HADOOP_HOME/etc/hadoop</p> <p>vi hadoop-env.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/default
</code></pre></div><p>vi core-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://mycluster<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>ha.zookeeper.quorum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata02:2181,bigdata03:2181,bigdata04:2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>vi hdfs-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token comment">&lt;!-- 副本数量为3 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- NameNode的路径--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.name.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/ha/dfs/name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- DataNode的路径--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.datanode.data.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/ha/dfs/data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 以下是 一对多，逻辑到物理节点的映射--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.nameservices<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mycluster<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.namenodes.mycluster<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>nn1,nn2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.rpc-address.mycluster.nn1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata01:8020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.rpc-address.mycluster.nn2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata02:8020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.http-address.mycluster.nn1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata01:50070<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.http-address.mycluster.nn2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata02:50070<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 以下是JN在哪里启动，数据存那个磁盘--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.shared.edits.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>qjournal://bigdata01:8485;bigdata02:8485;bigdata03:8485/mycluster<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.journalnode.edits.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hadoop/ha/dfs/jn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- HA角色切换的代理类和实现方法，我们用的ssh免密--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.client.failover.proxy.provider.mycluster<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.fencing.methods<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>sshfence<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.fencing.ssh.private-key-files<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/root/.ssh/id_dsa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 开启自动化： 启动zkfc--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.automatic-failover.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>vi slaves</p> <div class="language-shell extra-class"><pre class="language-shell"><code>bigdata02
bigdata03
bigdata04
</code></pre></div></blockquote> <h3 id="配置分发-2"><a href="#配置分发-2" class="header-anchor">#</a> 配置分发</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> <span class="token variable">$HADOOP_HOME</span>/etc/hadoop
<span class="token function">scp</span> -r hadoop-env.sh core-site.xml hdfs-site.xml slaves bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r hadoop-env.sh core-site.xml hdfs-site.xml slaves bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r hadoop-env.sh core-site.xml hdfs-site.xml slaves bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h3 id="第一次启动顺序"><a href="#第一次启动顺序" class="header-anchor">#</a> 第一次启动顺序</h3> <h4 id="开启1-2-3台的journalnode"><a href="#开启1-2-3台的journalnode" class="header-anchor">#</a> 开启1,2,3台的journalnode</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hadoop-daemon.sh start journalnode
</code></pre></div><h4 id="选择一个nn-做格式化"><a href="#选择一个nn-做格式化" class="header-anchor">#</a> 选择一个NN 做格式化</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hdfs namenode -format
hadoop-daemon.sh start namenode
</code></pre></div><h4 id="在另一台nn进行同步"><a href="#在另一台nn进行同步" class="header-anchor">#</a> 在另一台NN进行同步</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hdfs namenode -bootstrapStandby
hadoop-daemon.sh start namenode
</code></pre></div><h4 id="在bigdata01下格式化zk"><a href="#在bigdata01下格式化zk" class="header-anchor">#</a> 在bigdata01下格式化zk</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hdfs zkfc -formatZK
</code></pre></div><h4 id="启动-3"><a href="#启动-3" class="header-anchor">#</a> 启动</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>start-dfs.sh
</code></pre></div><h4 id="停止-3"><a href="#停止-3" class="header-anchor">#</a> 停止</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>stop-dfs.sh
</code></pre></div><h3 id="再次启动时的启动顺序"><a href="#再次启动时的启动顺序" class="header-anchor">#</a> 再次启动时的启动顺序</h3> <h4 id="bigdata01-04启动zookeeper"><a href="#bigdata01-04启动zookeeper" class="header-anchor">#</a> bigdata01-04启动Zookeeper</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zkServer.sh start
</code></pre></div><h4 id="启动hadoop"><a href="#启动hadoop" class="header-anchor">#</a> 启动hadoop</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>start-dfs.sh
</code></pre></div><h3 id="停止ha"><a href="#停止ha" class="header-anchor">#</a> 停止HA</h3> <h4 id="停止hadoop"><a href="#停止hadoop" class="header-anchor">#</a> 停止hadoop</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>stop-dfs.sh
</code></pre></div><h4 id="停止zookeeper"><a href="#停止zookeeper" class="header-anchor">#</a> 停止Zookeeper</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zkServer.sh stop
</code></pre></div><h3 id="访问地址-3"><a href="#访问地址-3" class="header-anchor">#</a> 访问地址</h3> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header-name keyword">http:</span>//bigdata01:50070
<span class="token header-name keyword">http:</span>//bigdata02:50070
</code></pre></div><h2 id="yarn安装"><a href="#yarn安装" class="header-anchor">#</a> Yarn安装</h2> <h3 id="部署策略-4"><a href="#部署策略-4" class="header-anchor">#</a> 部署策略</h3> <table><thead><tr><th></th> <th>NameNode</th> <th>ZKFC</th> <th>JournalNode</th> <th>Zookeeper</th> <th>DataNode</th> <th>ResourceManager</th> <th>NodeManager</th></tr></thead> <tbody><tr><td>bigdata01</td> <td>是</td> <td>是</td> <td>是</td> <td>是</td> <td></td> <td></td> <td></td></tr> <tr><td>bigdata02</td> <td>是</td> <td>是</td> <td>是</td> <td>是</td> <td>是</td> <td></td> <td>是</td></tr> <tr><td>bigdata03</td> <td></td> <td></td> <td>是</td> <td>是</td> <td>是</td> <td>是</td> <td>是</td></tr> <tr><td>bigdata04</td> <td></td> <td></td> <td></td> <td>是</td> <td>是</td> <td>是</td> <td>是</td></tr></tbody></table> <h3 id="修改配置"><a href="#修改配置" class="header-anchor">#</a> 修改配置</h3> <blockquote><p>cd $HADOOP_HOME/etc/hadoop</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cp</span> mapred-site.xml.template mapred-site.xml
</code></pre></div><p>vi mapred-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>vi yarn-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.ha.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.zk-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata01:2181,bigdata02:2181,bigdata03:2181,bigdata04:2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.cluster-id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>tiankafei<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.ha.rm-ids<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>rm1,rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname.rm1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname.rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata04<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.webapp.address.rm1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata03:8088<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.webapp.address.rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bigdata04:8088<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote> <h3 id="配置分发-3"><a href="#配置分发-3" class="header-anchor">#</a> 配置分发</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> -r mapred-site.xml yarn-site.xml bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r mapred-site.xml yarn-site.xml bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r mapred-site.xml yarn-site.xml bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h3 id="启动resourcemanager"><a href="#启动resourcemanager" class="header-anchor">#</a> 启动resourcemanager</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>yarn-daemons.sh start resourcemanager
</code></pre></div><h3 id="启动yarn"><a href="#启动yarn" class="header-anchor">#</a> 启动yarn</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>start-yarn.sh
</code></pre></div><h3 id="访问地址-4"><a href="#访问地址-4" class="header-anchor">#</a> 访问地址</h3> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header-name keyword">http:</span>//bigdata03:8088/cluster
<span class="token header-name keyword">http:</span>//bigdata04:8088/cluster
</code></pre></div><h2 id="高可用集群停止服务"><a href="#高可用集群停止服务" class="header-anchor">#</a> 高可用集群停止服务</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>yarn-daemons.sh stop resourcemanager
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>stop-yarn.sh
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>stop-dfs.sh
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>zkServer.sh stop
</code></pre></div><h2 id="高可用集群再次启动"><a href="#高可用集群再次启动" class="header-anchor">#</a> 高可用集群再次启动</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>zkServer.sh start
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>yarn-daemons.sh start resourcemanager
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>start-dfs.sh
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>start-yarn.sh
</code></pre></div><h2 id="hive安装配置"><a href="#hive安装配置" class="header-anchor">#</a> Hive安装配置</h2> <h3 id="单机部署-2"><a href="#单机部署-2" class="header-anchor">#</a> 单机部署</h3> <table><thead><tr><th></th> <th>mysql</th> <th>hive服务端</th> <th>hive客户端</th></tr></thead> <tbody><tr><td>bigdata01</td> <td></td> <td>是</td> <td>是</td></tr> <tr><td>bigdata02</td> <td></td> <td></td> <td></td></tr> <tr><td>bigdata03</td> <td></td> <td></td> <td></td></tr> <tr><td>bigdata04</td> <td></td> <td></td> <td></td></tr></tbody></table> <h4 id="安装包分发-2"><a href="#安装包分发-2" class="header-anchor">#</a> 安装包分发</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span>
<span class="token function">scp</span> -r ~/apache-hive-2.3.6-bin.tar.gz bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r ~/apache-hive-2.3.6-bin.tar.gz bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r ~/apache-hive-2.3.6-bin.tar.gz bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h4 id="解压到指定目录-3"><a href="#解压到指定目录-3" class="header-anchor">#</a> 解压到指定目录</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">tar</span> -zxvf /root/apache-hive-2.3.6-bin.tar.gz -C /opt/bigdata
<span class="token builtin class-name">cd</span> /opt/bigdata
<span class="token function">mv</span> apache-hive-2.3.6-bin/ apache-hive-2.3.6

</code></pre></div><h4 id="设置环境变量-5"><a href="#设置环境变量-5" class="header-anchor">#</a> 设置环境变量</h4> <blockquote><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /etc/profile
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/default
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/jre
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib:<span class="token variable">$JRE_HOME</span>/lib
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/opt/bigdata/hadoop-2.8.3-ha/hadoop-2.8.3
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ZOOKEEPER_HOME</span><span class="token operator">=</span>/opt/bigdata/zookeeper-3.4.9
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HIVE_HOME</span><span class="token operator">=</span>/opt/bigdata/apache-hive-2.3.6
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin:<span class="token variable">$ZOOKEEPER_HOME</span>/bin:<span class="token variable">$HIVE_HOME</span>/bin
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre></div></blockquote> <h4 id="执行配置-5"><a href="#执行配置-5" class="header-anchor">#</a> 执行配置</h4> <blockquote><p>cd $HIVE_HOME/conf</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cp</span> hive-default.xml.template hive-site.xml
</code></pre></div><p>vi hive-site.xml</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#删除 </span>
:.,$-1d
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.warehouse.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hive/warehouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>jdbc:mysql://software:3306/hive?createDatabaseIfNotExist=true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>com.mysql.cj.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>tiankafei<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote> <h4 id="分发配置"><a href="#分发配置" class="header-anchor">#</a> 分发配置</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> -r hive-site.xml bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r hive-site.xml bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r hive-site.xml bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h4 id="上传mysql依赖的jar包"><a href="#上传mysql依赖的jar包" class="header-anchor">#</a> 上传mysql依赖的jar包</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /opt/bigdata/apache-hive-2.3.6/lib
<span class="token function">scp</span> -r mysql-connector-java-8.0.18.jar bigdata02:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r mysql-connector-java-8.0.18.jar bigdata03:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token function">scp</span> -r mysql-connector-java-8.0.18.jar bigdata04:<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>

</code></pre></div><h4 id="在bigdata01上初始化数据库"><a href="#在bigdata01上初始化数据库" class="header-anchor">#</a> 在bigdata01上初始化数据库</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>schematool -dbType mysql -initSchema
</code></pre></div><h4 id="启动hive"><a href="#启动hive" class="header-anchor">#</a> 启动hive</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hive
</code></pre></div><h3 id="服务元数据分离配置"><a href="#服务元数据分离配置" class="header-anchor">#</a> 服务元数据分离配置</h3> <table><thead><tr><th></th> <th>mysql</th> <th>hive服务端</th> <th>hive客户端</th></tr></thead> <tbody><tr><td>bigdata01</td> <td></td> <td></td> <td></td></tr> <tr><td>bigdata02</td> <td></td> <td></td> <td></td></tr> <tr><td>bigdata03</td> <td></td> <td>是</td> <td></td></tr> <tr><td>bigdata04</td> <td></td> <td></td> <td>是</td></tr></tbody></table> <h4 id="bigdata02配置"><a href="#bigdata02配置" class="header-anchor">#</a> bigdata02配置</h4> <blockquote><p>cd $HIVE_HOME/conf</p> <p>vi hive-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.warehouse.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hive/warehouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>jdbc:mysql://software:3306/hive_remote?createDatabaseIfNotExist=true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>com.mysql.cj.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>tiankafei<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote> <p>bigdata03-04配置</p> <blockquote><p>vi hive-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.warehouse.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/bigdata/hive/warehouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.uris<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>thrift://bigdata02:9083<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote> <h4 id="在bigdata02上初始化数据库"><a href="#在bigdata02上初始化数据库" class="header-anchor">#</a> 在bigdata02上初始化数据库</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>schematool -dbType mysql -initSchema
</code></pre></div><h4 id="在bigdata02上阻塞式启动hive服务端"><a href="#在bigdata02上阻塞式启动hive服务端" class="header-anchor">#</a> 在bigdata02上阻塞式启动hive服务端</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hive --service metastore
</code></pre></div><h4 id="在bigdata03-04上启动hive客户端"><a href="#在bigdata03-04上启动hive客户端" class="header-anchor">#</a> 在bigdata03-04上启动Hive客户端</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hive
</code></pre></div><h3 id="解决root用户不能登录的问题-其他用户登录需要配置各种权限"><a href="#解决root用户不能登录的问题-其他用户登录需要配置各种权限" class="header-anchor">#</a> 解决root用户不能登录的问题，其他用户登录需要配置各种权限</h3> <blockquote><p>cd $HADOOP_HOME/etc/hadoop</p> <p>vi core-site.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.proxyuser.root.groups<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.proxyuser.root.hosts<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>配置完成之后重新启动集群，或者在namenode的节点上执行如下命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hdfs dfsadmin -fs hdfs://bigdata01:8020 -refreshSuperUserGroupsConfiguration
hdfs dfsadmin -fs hdfs://bigdata02:8020 -refreshSuperUserGroupsConfiguration
</code></pre></div></blockquote> <h3 id="独立hiveserver2模式"><a href="#独立hiveserver2模式" class="header-anchor">#</a> 独立hiveserver2模式</h3> <p>将现有的所有hive的服务停止，不需要修改任何服务，在bigdata03机器上执行hiveserver2或者hive --service hiveserver2的命令，开始启动hiveserver2的服务，hiveserver2的服务也是一个阻塞式窗口，当开启服务后，会开启一个10000的端口，对外提供服务。</p> <h4 id="bigdata02上启动服务"><a href="#bigdata02上启动服务" class="header-anchor">#</a> bigdata02上启动服务</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hiveserver2
或
hive --service hiveserver2
</code></pre></div><h4 id="bigdata03-04上执行"><a href="#bigdata03-04上执行" class="header-anchor">#</a> bigdata03-04上执行</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#1。直接在命令行执行</span>
<span class="token comment"># beeline -u jdbc:hive2://&lt;host&gt;:&lt;port&gt;/&lt;db&gt; -n name</span>
beeline -u jdbc:hive2://bigdata02:10000/default -n root tiankafei
<span class="token comment">#2。先通过beeline进入交互式窗口，然后再执行下面的命令</span>
beeline
<span class="token comment"># !connect jdbc:hive2://&lt;host&gt;:&lt;port&gt;/&lt;db&gt; root 123</span>
<span class="token operator">!</span>connect jdbc:hive2://bigdata02:10000/default root tiankafei
</code></pre></div><h3 id="共享metastore-server的hiveserver2模式搭建"><a href="#共享metastore-server的hiveserver2模式搭建" class="header-anchor">#</a> 共享metastore server的hiveserver2模式搭建</h3> <h4 id="在bigdata02上执行hive-service-metastore启动元数据服务"><a href="#在bigdata02上执行hive-service-metastore启动元数据服务" class="header-anchor">#</a> 在bigdata02上执行hive --service metastore启动元数据服务</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hive --service metastore
</code></pre></div><h4 id="在bigdata03上执行hiveserver2或者hive-service-hiveserver2两个命令其中一个都可以"><a href="#在bigdata03上执行hiveserver2或者hive-service-hiveserver2两个命令其中一个都可以" class="header-anchor">#</a> 在bigdata03上执行hiveserver2或者hive --service hiveserver2两个命令其中一个都可以</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hiveserver2
或
hive --service hiveserver2
</code></pre></div><h4 id="在任意一台包含beeline脚本的虚拟机中执行beeline的命令进行连接"><a href="#在任意一台包含beeline脚本的虚拟机中执行beeline的命令进行连接" class="header-anchor">#</a> 在任意一台包含beeline脚本的虚拟机中执行beeline的命令进行连接</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#1。直接在命令行执行</span>
<span class="token comment"># beeline -u jdbc:hive2://&lt;host&gt;:&lt;port&gt;/&lt;db&gt; -n name</span>
beeline -u jdbc:hive2://bigdata03:10000/default -n root tiankafei
<span class="token comment">#2。先通过beeline进入交互式窗口，然后再执行下面的命令</span>
beeline
<span class="token comment"># !connect jdbc:hive2://&lt;host&gt;:&lt;port&gt;/&lt;db&gt; root 123</span>
<span class="token operator">!</span>connect jdbc:hive2://bigdata03:10000/default root tiankafei
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/15/2020, 1:01:06 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/tiankafei-docs-大数据/hadoop学习笔记.html">
        大数据启蒙
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b98ad849.js" defer></script><script src="/assets/js/2.01d54993.js" defer></script><script src="/assets/js/92.f6881b21.js" defer></script>
  </body>
</html>
